<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Paradise of Web</title>
  
  <subtitle>ä¸ä¼šå¼¹å‰ä»–çš„è´æ–¯æ‰‹ï¼Œä¸æ˜¯å¥½ç¨‹åºå‘˜</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-11-05T13:24:00.152Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Tian Xueweii</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS Core Animation - Advanced Techniques-å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰</title>
    <link href="http://yoursite.com/2018/11/05/iOS%20Core%20Animation-%20Advanced%20Techniques-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <id>http://yoursite.com/2018/11/05/iOS Core Animation- Advanced Techniques-å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰/</id>
    <published>2018-11-05T12:41:37.000Z</published>
    <updated>2018-11-05T13:24:00.152Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å˜æ¢"><a href="#å˜æ¢" class="headerlink" title="å˜æ¢"></a>å˜æ¢</h2><h3 id="ä»¿å°„å˜æ¢"><a href="#ä»¿å°„å˜æ¢" class="headerlink" title="ä»¿å°„å˜æ¢"></a>ä»¿å°„å˜æ¢</h3><ul><li>UIViewçš„<code>transform</code>å±æ€§ï¼Œç”¨äºè§†å›¾åœ¨äºŒç»´ç©ºé—´åšæ—‹è½¬ï¼Œç¼©æ”¾å’Œå¹³ç§»</li><li>ä»¿å°„å˜æ¢çš„å®šä¹‰ï¼Œæ˜¯æŒ‡æ— è®ºå˜æ¢çŸ©é˜µç”¨ä»€ä¹ˆå€¼ï¼Œå›¾å±‚ä¸­å¹³è¡Œçš„ä¸¤æ¡çº¿åœ¨å˜æ¢ä¹‹åä»ç„¶ä¿æŒå¹³è¡Œ</li><li>Core Graphicsæä¾›çš„å®ä¾‹åŒ–ä»¿å°„å˜æ¢çš„æ–¹æ³•<ul><li>CGAffineTransformMakeRotation(CGFloat angle) // æ—‹è½¬</li><li>CGAffineTransformMakeScale(CGFloat sx, CGFloat sy) // ç¼©æ”¾</li><li>CGAffineTransformMakeTranslation(CGFloat tx, CGFloat ty) // å¹³ç§»</li></ul></li><li>CALayerä¹Ÿæœ‰ä¸€ä¸ª<code>transform</code>å±æ€§ï¼Œä½†å®ƒçš„ç±»å‹æ˜¯CATransform3Dï¼Œè€Œä¸æ˜¯CGAffineTransform</li><li>Core Graphicsæä¾›äº†åœ¨ä¹‹å‰å˜æ¢çš„åŸºç¡€ä¸Šç»§ç»­å˜æ¢çš„æ–¹æ³•<ul><li>CGAffineTransformRotate(CGAffineTransform t, CGFloat angle)</li><li>CGAffineTransformScale(CGAffineTransform t, CGFloat sx, CGFloat sy)</li><li>CGAffineTransformTranslate(CGAffineTransform t, CGFloat tx, CGFloat ty)</li></ul></li><li>ä»¥åŠä¸€ä¸ªå•ä½çŸ©é˜µå¸¸é‡CGAffineTransformIdentity</li><li>æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™äº›å‡½æ•°ï¼Œåœ¨å¿…è¦çš„æ—¶å€™ç»„åˆä¸€ä¸ªæ›´åŠ å¤æ‚çš„å˜åŒ–ï¼Œè¿™æ ·çš„å®ç°æ–¹å¼ï¼Œæ˜¯ä¼˜é›…çš„</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">//create a new transform</span></span><br><span class="line">    <span class="built_in">CGAffineTransform</span> transform = <span class="built_in">CGAffineTransformIdentity</span>; </span><br><span class="line">    <span class="comment">//scale by 50%</span></span><br><span class="line">    transform = <span class="built_in">CGAffineTransformScale</span>(transform, <span class="number">0.5</span>, <span class="number">0.5</span>);</span><br><span class="line">    <span class="comment">//rotate by 30 degrees</span></span><br><span class="line">    transform = <span class="built_in">CGAffineTransformRotate</span>(transform, M_PI / <span class="number">180.0</span> * <span class="number">30.0</span>);</span><br><span class="line">    <span class="comment">//translate by 200 points</span></span><br><span class="line">    transform = <span class="built_in">CGAffineTransformTranslate</span>(transform, <span class="number">200</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//apply transform to layer</span></span><br><span class="line">    <span class="keyword">self</span>.layerView.layer.affineTransform = transform;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="3Då˜æ¢"><a href="#3Då˜æ¢" class="headerlink" title="3Då˜æ¢"></a>3Då˜æ¢</h3><ul><li>å’ŒCGAffineTransformç±»ä¼¼ï¼ŒCATransform3Dä¹Ÿæ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œä½†æ˜¯å’Œ2x3çš„çŸ©é˜µä¸åŒï¼ŒCATransform3Dæ˜¯ä¸€ä¸ªå¯ä»¥åœ¨3ç»´ç©ºé—´å†…åšå˜æ¢çš„4x4çš„çŸ©é˜µï¼Œæˆ‘ä»¬è¦å…³æ³¨zPosition</li><li><p>3Då˜æ¢çš„æ–¹æ³•</p><ul><li>CATransform3DMakeRotation(CGFloat angle, CGFloat x, CGFloat y, CGFloat z)</li><li>CATransform3DMakeScale(CGFloat sx, CGFloat sy, CGFloat sz) </li><li><p>CATransform3DMakeTranslation(Gloat tx, CGFloat ty, CGFloat tz) </p><blockquote><p>ä¸ä»¿å°„å˜åŒ–çš„æ—‹è½¬ä¸åŒï¼ŒCATransform3DMakeRotationæ˜¯ç»•æŸä¸€ä¸ªï¼ˆx,y,zï¼‰è½´è¿›è¡Œæ—‹è½¬</p></blockquote></li></ul></li></ul><h4 id="é€è§†æ•ˆæœ"><a href="#é€è§†æ•ˆæœ" class="headerlink" title="é€è§†æ•ˆæœ"></a>é€è§†æ•ˆæœ</h4><ul><li>ä¸‰ç»´ç©ºé—´ä¸­ï¼Œå½“ç‰©ä½“åŸç†æˆ‘ä»¬æ—¶ï¼Œä¼šçœ‹èµ·æ¥æ¯”è¾ƒå°ï¼Œè¿œå¤„çš„ç‰©ä½“å’Œè¿‘å¤„çš„ç‰©ä½“å­˜åœ¨ä¸åŒçš„ç¼©æ”¾æ¯”ä¾‹</li><li>ä¸ºäº†å®ç°é€è§†æ•ˆæœï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹<code>m34</code>å€¼ï¼Œ<code>m34</code>çš„é»˜è®¤å€¼æ˜¯0ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è®¾ç½®<code>m34</code>ä¸ºï¼ˆ-1.0 / dï¼‰æ¥å®ç°é€è§†æ•ˆæœï¼Œdä»£è¡¨äº†æƒ³è±¡ä¸­è§†è§’ç›¸æœºå’Œå±å¹•ä¹‹é—´çš„è·ç¦»ï¼Œä»¥åƒç´ ä¸ºå•ä½ï¼Œé€šå¸¸500~1000å°±å¯ä»¥äº†ã€‚ä»£ç å¦‚ä¸‹ï¼š</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">//create a new transform</span></span><br><span class="line">    <span class="built_in">CATransform3D</span> transform = <span class="built_in">CATransform3DIdentity</span>;</span><br><span class="line">    <span class="comment">//apply perspective</span></span><br><span class="line">    transform.m34 = - <span class="number">1.0</span> / <span class="number">500.0</span>;</span><br><span class="line">    <span class="comment">//rotate by 45 degrees along the Y axis</span></span><br><span class="line">    transform = <span class="built_in">CATransform3DRotate</span>(transform, M_PI_4, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//apply to layer</span></span><br><span class="line">    <span class="keyword">self</span>.layerView.layer.transform = transform;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç­ç‚¹"><a href="#ç­ç‚¹" class="headerlink" title="ç­ç‚¹"></a>ç­ç‚¹</h4><ul><li>å½“åœ¨é€è§†è§’åº¦ç»˜å›¾çš„æ—¶å€™ï¼Œè¿œç¦»ç›¸æœºè§†è§’çš„ç‰©ä½“å°†ä¼šå˜å°å˜è¿œï¼Œå½“è¿œç¦»åˆ°ä¸€ä¸ªæé™è·ç¦»ï¼Œå®ƒä»¬å¯èƒ½å°±ç¼©æˆäº†ä¸€ä¸ªç‚¹ï¼Œäºæ˜¯æ‰€æœ‰çš„ç‰©ä½“æœ€åéƒ½æ±‡èšæ¶ˆå¤±åœ¨åŒä¸€ä¸ªç‚¹ã€‚è¿™ä¸ªç‚¹å«ç­ç‚¹</li><li>Core Animationå®šä¹‰çš„è¿™ä¸ªç‚¹ä½äºå˜æ¢å‰<code>anchorPoint</code>çš„ä½ç½®</li><li>å½“ä¸€ä¸ªå›¾å±‚æœ‰å¤šä¸ª3Då˜æ¢çš„å­å›¾å±‚ï¼Œæˆ‘ä»¬è¦æƒ³è®©æ•´ä¸ªè§†å›¾ç»˜åˆ¶çš„æ›´æœ‰3Dæ•ˆæœï¼Œåº”è¯¥é¦–å…ˆæŠŠå®ƒä»¬éƒ½æ”¾ç½®äºå±å¹•ä¸­å¤®ï¼Œç„¶åé€šè¿‡å¹³ç§»æ¥æŠŠå®ƒç§»åŠ¨åˆ°æŒ‡å®šä½ç½®ï¼ˆè€Œä¸æ˜¯ç›´æ¥æ”¹å˜å®ƒçš„positionï¼‰ï¼Œè¿™æ ·æ‰€æœ‰çš„3Då›¾å±‚éƒ½å…±äº«ä¸€ä¸ªç­ç‚¹</li></ul><h4 id="sublayerTransformå±æ€§"><a href="#sublayerTransformå±æ€§" class="headerlink" title="sublayerTransformå±æ€§"></a>sublayerTransformå±æ€§</h4><ul><li>å¦‚æœå›¾å±‚æœ‰å¤šä¸ªå­å›¾å±‚éƒ½è¦åš3Då˜æ¢ï¼Œé‚£å°±è¦åˆ†åˆ«å¯¹<code>m34</code>è¿›è¡Œè®¾ç½®ï¼ŒCALayeræœ‰ä¸€ä¸ªå±æ€§å«åš<code>sublayerTransform</code>ï¼Œè¿™ä¸ªå˜æ¢ä¼šä½œç”¨äºæ‰€æœ‰å­å›¾å±‚</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">//apply perspective transform to container</span></span><br><span class="line">    <span class="comment">//å®¹å™¨è§†å›¾å˜æ¢ï¼Œperspectiveå°†ä¼šå½±å“layerView1å’ŒlayerView2</span></span><br><span class="line">    <span class="built_in">CATransform3D</span> perspective = <span class="built_in">CATransform3DIdentity</span>;</span><br><span class="line">    perspective.m34 = - <span class="number">1.0</span> / <span class="number">500.0</span>;</span><br><span class="line">    <span class="keyword">self</span>.containerView.layer.sublayerTransform = perspective;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//rotate layerView1 by 45 degrees along the Y axis</span></span><br><span class="line">    <span class="built_in">CATransform3D</span> transform1 = <span class="built_in">CATransform3DMakeRotation</span>(M_PI_4, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">self</span>.layerView1.layer.transform = transform1;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">//rotate layerView2 by 45 degrees along the Y axis</span></span><br><span class="line">    <span class="built_in">CATransform3D</span> transform2 = <span class="built_in">CATransform3DMakeRotation</span>(-M_PI_4, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">self</span>.layerView2.layer.transform = transform2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å›¾å±‚çš„èƒŒé¢"><a href="#å›¾å±‚çš„èƒŒé¢" class="headerlink" title="å›¾å±‚çš„èƒŒé¢"></a>å›¾å±‚çš„èƒŒé¢</h4><ul><li>å›¾å±‚æ˜¯åŒé¢ç»˜åˆ¶çš„ï¼Œåé¢æ˜¯ä¸€ä¸ªé•œåƒå›¾ç‰‡ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç‰¹æ€§ï¼Œä¼šç»™ç”¨æˆ·é€ æˆå›°æ‰°ï¼ŒåŒæ—¶ä¹Ÿå¯èƒ½é€ æˆç³»ç»Ÿèµ„æºçš„æµªè´¹ï¼Œè¯•æƒ³æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°èƒŒé¢ï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦æµªè´¹GPUç»˜åˆ¶å®ƒä»¬ï¼Ÿ</li><li><code>doubleSided</code>å±æ€§ï¼Œç”¨æ¥æ§åˆ¶å›¾å±‚èƒŒé¢æ˜¯å¦ç»˜åˆ¶ï¼Œé»˜è®¤ä¸ºYES</li></ul><h2 id="ä¸“ç”¨å›¾å±‚"><a href="#ä¸“ç”¨å›¾å±‚" class="headerlink" title="ä¸“ç”¨å›¾å±‚"></a>ä¸“ç”¨å›¾å±‚</h2><p>CALayerç±»å…·æœ‰ä¸€äº›éå¸¸æœ‰ç”¨çš„ç»˜å›¾å’ŒåŠ¨ç”»åŠŸèƒ½ã€‚ä½†Core Animationä¸ä»…ä½œç”¨äºå›¾ç‰‡å’Œé¢œè‰²ï¼ŒCALayeræ‹“å±•äº†å…¶ä»–ä¸€äº›ä¸“ç”¨äºæŸç§åŠŸèƒ½çš„å­ç±»ï¼Œä»¥å¢å¼ºCore Animationçš„ç»˜å›¾èƒ½åŠ›ã€‚è¿™é‡Œå­¦ä¹ æ€»ç»“äº†å‡ ä¸ªå¸¸ç”¨çš„ä¸“ç”¨å›¾å±‚ï¼Œå…¶ä»–çš„ä»…ä½œäº†è§£</p><h3 id="CAShapeLayer-å½¢çŠ¶å›¾å±‚"><a href="#CAShapeLayer-å½¢çŠ¶å›¾å±‚" class="headerlink" title="CAShapeLayer - å½¢çŠ¶å›¾å±‚"></a>CAShapeLayer - å½¢çŠ¶å›¾å±‚</h3><ul><li>é˜´å½±å¯ä»¥ä½¿ç”¨CGPathæ¥æ„å»ºè½®å»“ï¼Œå›¾å±‚ä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹å¼æ„å»º</li><li>CAShapeLayeræ˜¯ä¸€ä¸ªé€šè¿‡çŸ¢é‡ç»˜å›¾çš„å›¾å±‚å­ç±»</li><li>æ¯”è¾ƒæ¨èçš„æ–¹å¼æ˜¯ä½¿ç”¨UIBezierPathç±»æ¥å¸®åŠ©åˆ›å»ºå›¾å±‚ï¼Œè¿™æ ·æˆ‘ä»¬ä¸ç”¨è€ƒè™‘äººå·¥é‡Šæ”¾CGPathèµ„æº</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ©ç”¨CAShapeLayeræ–°å»ºå›¾å±‚ç»˜åˆ¶ä¸€ä¸ªç«æŸ´äºº</span></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">  [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">  <span class="comment">//create path</span></span><br><span class="line">  <span class="built_in">UIBezierPath</span> *path = [[<span class="built_in">UIBezierPath</span> alloc] init];</span><br><span class="line">  [path moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">175</span>, <span class="number">100</span>)];</span><br><span class="line">  ï¿¼</span><br><span class="line">  [path addArcWithCenter:<span class="built_in">CGPointMake</span>(<span class="number">150</span>, <span class="number">100</span>) radius:<span class="number">25</span> startAngle:<span class="number">0</span> endAngle:<span class="number">2</span>*M_PI clockwise:<span class="literal">YES</span>];</span><br><span class="line">  [path moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">150</span>, <span class="number">125</span>)];</span><br><span class="line">  [path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">150</span>, <span class="number">175</span>)];</span><br><span class="line">  [path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">125</span>, <span class="number">225</span>)];</span><br><span class="line">  [path moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">150</span>, <span class="number">175</span>)];</span><br><span class="line">  [path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">175</span>, <span class="number">225</span>)];</span><br><span class="line">  [path moveToPoint:<span class="built_in">CGPointMake</span>(<span class="number">100</span>, <span class="number">150</span>)];</span><br><span class="line">  [path addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="number">200</span>, <span class="number">150</span>)];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//create shape layer</span></span><br><span class="line">  <span class="built_in">CAShapeLayer</span> *shapeLayer = [<span class="built_in">CAShapeLayer</span> layer];</span><br><span class="line">  shapeLayer.strokeColor = [<span class="built_in">UIColor</span> redColor].CGColor;</span><br><span class="line">  shapeLayer.fillColor = [<span class="built_in">UIColor</span> clearColor].CGColor;</span><br><span class="line">  shapeLayer.lineWidth = <span class="number">5</span>;</span><br><span class="line">  shapeLayer.lineJoin = kCALineJoinRound;</span><br><span class="line">  shapeLayer.lineCap = kCALineCapRound;</span><br><span class="line">  shapeLayer.path = path.CGPath;</span><br><span class="line">  <span class="comment">//add it to our view</span></span><br><span class="line">  [<span class="keyword">self</span>.containerView.layer addSublayer:shapeLayer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>CAShapeLayerè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨çš„ç”¨æ³•ï¼Œæ˜¯ç»˜åˆ¶çŸ©å½¢çš„æŒ‡å®šåœ†è§’ï¼ŒUIBezierPathæœ‰ä¸€ä¸ªè‡ªåŠ¨ç»˜åˆ¶åœ†è§’çŸ©å½¢çš„æ„é€ æ–¹æ³•</li><li>ç›®å‰å¸¸ç”¨çš„åšæ³•æ˜¯åœ¨UIViewçš„åˆ†ç±»æ·»åŠ ä»¥ä¸‹æ–¹æ³•ï¼Œåˆ›å»ºå›¾å±‚è’™ç‰ˆ</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)addRoundedCorners:(<span class="built_in">UIRectCorner</span>)corners radius:(<span class="built_in">CGFloat</span>)radii&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">UIBezierPath</span>* rounded = [<span class="built_in">UIBezierPath</span> bezierPathWithRoundedRect:<span class="keyword">self</span>.bounds byRoundingCorners:corners cornerRadii:<span class="built_in">CGSizeMake</span>(radii, radii)];</span><br><span class="line">    <span class="built_in">CAShapeLayer</span>* shape = [[<span class="built_in">CAShapeLayer</span> alloc] init];</span><br><span class="line">    [shape setPath:rounded.CGPath];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">self</span>.layer.mask = shape;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>è¿™ä¹ˆåšæœ‰ä¸¤ä¸ªé—®é¢˜ï¼Œä¸€æ˜¯å½“æˆ‘ä»¬åŒæ—¶éœ€è¦åˆ›å»ºæŒ‡å®šåœ†è§’å’Œé˜´å½±æ—¶ï¼Œä¸å¯é¿å…è¦æ·»åŠ ä¸€ä¸ªæ–°çš„Containerå›¾å±‚ï¼›äºŒæ˜¯åŠ¨æ€ä¿®æ”¹<code>frame.size</code>æ—¶ï¼Œè’™ç‰ˆè·¯å¾„å¹¶ä¸ä¼šæ›´æ–°ï¼ˆå‡†ç¡®è¯´<code>pathRect</code>å°±æ˜¯åˆå§‹<code>bounds</code>å€¼ï¼‰</p></blockquote><blockquote><p>åœ¨ä¹¦ä¸­æå‡ºã€æˆ‘ä»¬å¯ä»¥æŠŠCAShapeLayerä½œä¸ºè§†å›¾çš„å®¿ä¸»å›¾å±‚ï¼Œè€Œä¸æ˜¯æ·»åŠ ä¸€ä¸ªå­è§†å›¾ã€‘ã€‚ç»è¿‡å®éªŒï¼Œä¸€ä¸ªå¯è¡Œçš„æ–¹æ¡ˆæ˜¯ï¼Œæˆ‘ä»¬é‡å†™UIViewçš„<code>+layerClass</code>æ–¹æ³•ï¼Œè¿”å›æŒ‡å®šå›¾å±‚ç±»<code>CAShapeLayer.class</code>ï¼Œå¹¶åœ¨å›¾å±‚å¸ƒå±€çš„æ—¶å€™æŒ‡å®špathï¼Œæ³¨æ„ï¼Œå¦‚æœè¦æŒ‡å®šCAShapeLayerèƒŒæ™¯å›¾å±‚ç€è‰²ï¼Œè¦ä½¿ç”¨<code>fillColor</code>å±æ€§è€Œä¸èƒ½ç›´æ¥å†™<code>backgroundColor</code></p></blockquote><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">+ (Class)layerClass&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">CAShapeLayer</span>.class;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)layoutSublayersOfLayer:(<span class="built_in">CALayer</span> *)layer&#123;</span><br><span class="line">    [<span class="keyword">super</span> layoutSublayersOfLayer:layer];</span><br><span class="line">    <span class="built_in">UIBezierPath</span> *path = [<span class="built_in">UIBezierPath</span> bezierPathWithRoundedRect:<span class="keyword">self</span>.bounds byRoundingCorners:_corners cornerRadii:<span class="built_in">CGSizeMake</span>(<span class="number">10</span>, <span class="number">10</span>)];</span><br><span class="line">    _shapeLayer.path = path.CGPath;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithFrame:(<span class="built_in">CGRect</span>)frame&#123;</span><br><span class="line">    <span class="keyword">self</span> = [<span class="keyword">super</span> initWithFrame:frame];</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">//custom layer</span></span><br><span class="line">        _shapeLayer = (<span class="built_in">CAShapeLayer</span> *)<span class="keyword">self</span>.layer;</span><br><span class="line">        _corners = <span class="built_in">UIRectCornerTopRight</span> | <span class="built_in">UIRectCornerBottomRight</span> | <span class="built_in">UIRectCornerBottomLeft</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CAGradientLayer-æ¸å˜å›¾å±‚"><a href="#CAGradientLayer-æ¸å˜å›¾å±‚" class="headerlink" title="CAGradientLayer - æ¸å˜å›¾å±‚"></a>CAGradientLayer - æ¸å˜å›¾å±‚</h3><ul><li>CAGradientLayeræ˜¯ç”¨æ¥ç”Ÿæˆä¸¤ç§æˆ–æ›´å¤šé¢œè‰²å¹³æ»‘æ¸å˜çš„ã€‚é€šå¸¸æˆ‘ä»¬ç»˜åˆ¶æ¸å˜å›¾ï¼Œä¼šç”¨Core Graphicsçš„<code>CGContextDrawLinearGradient()</code>æ–¹æ³•ç”Ÿæˆä¸€å¼ å›¾ç‰‡ï¼Œä½†ç›¸è¾ƒäºè¿™ç§æ–¹å¼ï¼ŒCAGradientLayerä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿä½¿æ•´ä¸ªæµç¨‹æ›´åŠ æ•ˆç‡ï¼Œå¹¶ä¸”ä»£ç ä¸Šæ›´åŠ ç®€æ´ä¼˜é›…</li><li>åˆ›å»ºä¸€ä¸ªç®€å•çš„æ¸å˜å›¾å±‚ï¼Œæ­¤å¤„æ³¨æ„æ¥æ”¶æ¸å˜è‰²å½©æ•°ç»„çš„ç±»å‹æ˜¯CGColorRefï¼Œä¸ºäº†ä¿è¯ç¼–è¯‘æ­£å¸¸éœ€è¦bridgeè½¬æ¢</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLoad &#123;</span><br><span class="line">  [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">  <span class="comment">//create gradient layer and add it to our container view</span></span><br><span class="line">  <span class="built_in">CAGradientLayer</span> *gradientLayer = [<span class="built_in">CAGradientLayer</span> layer];</span><br><span class="line">  gradientLayer.frame = <span class="keyword">self</span>.containerView.bounds;</span><br><span class="line">  [<span class="keyword">self</span>.containerView.layer addSublayer:gradientLayer];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//set gradient colors</span></span><br><span class="line">  gradientLayer.colors = @[(__bridge <span class="keyword">id</span>)[<span class="built_in">UIColor</span> redColor].CGColor, (__bridge <span class="keyword">id</span>)[<span class="built_in">UIColor</span> blueColor].CGColor];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//set gradient start and end points</span></span><br><span class="line">  gradientLayer.startPoint = <span class="built_in">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">  gradientLayer.endPoint = <span class="built_in">CGPointMake</span>(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CAReplicatorLayer-é‡å¤å›¾å±‚"><a href="#CAReplicatorLayer-é‡å¤å›¾å±‚" class="headerlink" title="CAReplicatorLayer - é‡å¤å›¾å±‚"></a>CAReplicatorLayer - é‡å¤å›¾å±‚</h3><ul><li><code>CAReplicatorLayer</code>çš„ç›®çš„æ˜¯ä¸ºäº†é«˜æ•ˆç”Ÿæˆè®¸å¤šç›¸ä¼¼çš„å›¾å±‚</li><li><code>CAReplicatorLayer</code>çš„å‡ ä¸ªå¸¸ç”¨å±æ€§<ul><li><code>instanceCount</code>åˆ›å»ºå¤šå°‘ä¸ªæŒ‡å®šå›¾å±‚çš„æ‹·è´</li><li><code>instanceDelay</code>ä¸¤æ¬¡æ‹·è´é—´çš„å»¶è¿Ÿ</li><li><code>instanceTransform</code>åŸºäºä¸Šæ¬¡æ‹·è´çš„ä»¿å°„å˜æ¢</li></ul></li><li><p>ä¸€èˆ¬å’Œ<code>CAAnimationGroup</code>ã€<code>CAShapeLayer</code>ç»„åˆä½¿ç”¨</p><blockquote><p>ä¹¦ä¸­å¹¶æ²¡æœ‰ä¸¾å¾ˆå¤šå®ç”¨æ€§çš„ä¾‹å­ï¼Œä½†å…¶å®è¿™ä¸ªå›¾å±‚ä½¿ç”¨è¿˜æ˜¯æŒºå¹¿æ³›çš„ï¼Œä¾‹å¦‚é›·è¾¾ï¼Œæ³¢çº¹ï¼ŒåŠ è½½çƒçƒï¼Œå’»ä¸€å’»æ•ˆæœç­‰ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™ä¸ªå›¾å±‚çš„ä½¿ç”¨éœ€è¦ä¸€äº›æƒ³è±¡åŠ›</p></blockquote></li></ul><h3 id="CAEmitterLayer-ç²’å­å›¾å±‚"><a href="#CAEmitterLayer-ç²’å­å›¾å±‚" class="headerlink" title="CAEmitterLayer - ç²’å­å›¾å±‚"></a>CAEmitterLayer - ç²’å­å›¾å±‚</h3><ul><li><code>CAEmitterLayer</code>æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ç²’å­å¼•æ“ï¼Œè¢«ç”¨æ¥åˆ›å»ºå®æ—¶ä¾‹å­åŠ¨ç”»å¦‚ï¼šçƒŸé›¾ï¼Œç«ï¼Œé›¨ç­‰ç­‰è¿™äº›æ•ˆæœã€‚å®é™…åº”ç”¨æ¯”è¾ƒå¹¿æ³›ï¼Œæ¯”å¦‚å¾®ä¿¡çš„çº¢åŒ…é›¨ï¼Œç›´æ’­é—´çš„å°â¤â¤<blockquote><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå®ç”¨çš„å›¾å±‚ï¼Œä¹‹åæˆ‘ä¼šä¸“é—¨å†™ä¸€ç¯‡åšå®¢æ¥è®²è®²ä»–çš„ä½¿ç”¨</p></blockquote></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å˜æ¢&quot;&gt;&lt;a href=&quot;#å˜æ¢&quot; class=&quot;headerlink&quot; title=&quot;å˜æ¢&quot;&gt;&lt;/a&gt;å˜æ¢&lt;/h2&gt;&lt;h3 id=&quot;ä»¿å°„å˜æ¢&quot;&gt;&lt;a href=&quot;#ä»¿å°„å˜æ¢&quot; class=&quot;headerlink&quot; title=&quot;ä»¿å°„å˜æ¢&quot;&gt;&lt;/a&gt;ä»¿å°„å˜æ¢&lt;/h
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="Core Animation" scheme="http://yoursite.com/tags/Core-Animation/"/>
    
  </entry>
  
  <entry>
    <title>iOS Core Animation - Advanced Techniques-å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰</title>
    <link href="http://yoursite.com/2018/11/03/iOS%20Core%20Animation-%20Advanced%20Techniques-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://yoursite.com/2018/11/03/iOS Core Animation- Advanced Techniques-å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰/</id>
    <published>2018-11-03T08:10:53.000Z</published>
    <updated>2018-11-05T12:55:36.706Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å›¾å±‚å‡ ä½•å­¦"><a href="#å›¾å±‚å‡ ä½•å­¦" class="headerlink" title="å›¾å±‚å‡ ä½•å­¦"></a>å›¾å±‚å‡ ä½•å­¦</h2><h3 id="è§†å›¾å’Œå›¾å±‚å¸ƒå±€å·®å¼‚"><a href="#è§†å›¾å’Œå›¾å±‚å¸ƒå±€å·®å¼‚" class="headerlink" title="è§†å›¾å’Œå›¾å±‚å¸ƒå±€å·®å¼‚"></a>è§†å›¾å’Œå›¾å±‚å¸ƒå±€å·®å¼‚</h3><ul><li>è§†å›¾ä¸Šçš„<code>center</code>ï¼Œåœ¨å›¾å±‚ä¸Šå¯¹åº”å«<code>position</code></li><li><code>center</code>å’Œ<code>position</code>éƒ½ä»£è¡¨äº†å½“å‰å›¾å±‚ç›¸å¯¹äºçˆ¶å›¾å±‚<code>anchorPoint</code>çš„ä½ç½®</li><li>è§†å›¾æ”¹å˜<code>frame</code>çš„å®è´¨æ˜¯æ”¹å˜å›¾å±‚çš„<code>frame</code></li><li><code>frame</code>æ˜¯æ ¹æ®<code>bounds</code>ï¼Œ<code>position</code>å’Œ<code>transform</code>è®¡ç®—è€Œæ¥ï¼Œæ‰€ä»¥å½“å…¶ä¸­ä»»ä½•ä¸€ä¸ªå€¼å‘ç”Ÿæ”¹å˜ï¼Œä»–éƒ½ä¼šå˜åŒ–ã€‚ç›¸åï¼Œæ”¹å˜<code>frame</code>çš„å€¼åŒæ ·ä¼šå½±å“åˆ°ä»–ä»¬å½“ä¸­çš„å€¼</li><li><code>frame</code>çš„å®½é«˜å¯èƒ½å’Œ<code>bounds</code>ä¸ä¸€è‡´ï¼Œæ¯”å¦‚è§†å›¾æ—‹è½¬å</li></ul><h3 id="anchorPointå±æ€§-é”šç‚¹"><a href="#anchorPointå±æ€§-é”šç‚¹" class="headerlink" title="anchorPointå±æ€§ - é”šç‚¹"></a>anchorPointå±æ€§ - é”šç‚¹</h3><ul><li>é”šç‚¹å¯ä»¥ç†è§£ä¸ºè§†å›¾çš„æŠŠæŸ„ï¼Œç¼©æ”¾ç§»åŠ¨æ—‹è½¬ç­‰æ“ä½œï¼Œä¼šç›¸å¯¹äºé”šç‚¹è¿›è¡Œ</li><li><code>anchorPoint</code>é€šè¿‡å•ä½åæ ‡æè¿°ï¼Œé»˜è®¤å€¼æ˜¯{0.5, 0.5}ï¼ˆå›¾å±‚ä¸­å¿ƒï¼‰</li><li><code>anchorPoint</code>å‘ç”Ÿäº†æ”¹å˜ä½†æ˜¯<code>position</code>æ²¡æœ‰æ”¹å˜ï¼Œæ‰€ä»¥å›¾å±‚ä¼šé‡æ–°å¸ƒå±€ï¼Œ<code>frame</code>ä¼šå‘ç”Ÿæ”¹å˜</li><li><code>anchorPoint</code>æ”¹å˜åï¼Œå»ºè®®é‡æ–°è®¾ç½®<code>frame</code>æˆ–<code>position</code></li></ul><h3 id="åæ ‡ç³»æ“ä½œ"><a href="#åæ ‡ç³»æ“ä½œ" class="headerlink" title="åæ ‡ç³»æ“ä½œ"></a>åæ ‡ç³»æ“ä½œ</h3><ul><li>CALayeræä¾›äº†ç‚¹æˆ–çŸ©å½¢åœ¨ä¸åŒå›¾å±‚åæ ‡ç³»é—´è½¬åŒ–çš„æ–¹æ³•</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">CGPoint</span>)convertPoint:(<span class="built_in">CGPoint</span>)point fromLayer:(<span class="built_in">CALayer</span> *)layer;</span><br><span class="line">- (<span class="built_in">CGPoint</span>)convertPoint:(<span class="built_in">CGPoint</span>)point toLayer:(<span class="built_in">CALayer</span> *)layer;</span><br><span class="line">- (<span class="built_in">CGRect</span>)convertRect:(<span class="built_in">CGRect</span>)rect fromLayer:(<span class="built_in">CALayer</span> *)layer;</span><br><span class="line">- (<span class="built_in">CGRect</span>)convertRect:(<span class="built_in">CGRect</span>)rect toLayer:(<span class="built_in">CALayer</span> *)layer;</span><br></pre></td></tr></table></figure><ul><li>å¯ä»¥é€šè¿‡è®¾ç½®<code>geometryFlipped</code>ç¿»è½¬æ•´ä¸ªåæ ‡ç³»ï¼Œä»–æ˜¯BOOLå‹çš„</li></ul><h3 id="å›¾å±‚çš„ä¸‰ç»´åæ ‡"><a href="#å›¾å±‚çš„ä¸‰ç»´åæ ‡" class="headerlink" title="å›¾å±‚çš„ä¸‰ç»´åæ ‡"></a>å›¾å±‚çš„ä¸‰ç»´åæ ‡</h3><ul><li>å›¾å±‚æœ‰<code>zPosition</code>å’Œ<code>anchorPointZ</code>æ¥æè¿°åœ¨Zè½´ä¸Šçš„ä½ç½®</li><li>å›¾å±‚æ˜¯ä¸€ä¸ªå®Œå…¨æ‰å¹³çš„å¯¹è±¡ï¼Œå¹¶æ²¡æœ‰æ›´å¤šå±æ€§æ¥æè¿°ä»–åœ¨Zè½´ä¸Šçš„é«˜åº¦äº†</li><li>å›¾å±‚çš„<code>zPosition</code>é™¤äº†ä½¿ç”¨CATransform3Dæ¥æ¸²æŸ“3DåŠ¨ç”»ï¼Œè¿˜å¯ä»¥ç”¨æ¥è°ƒæ•´å›¾å±‚çš„æ˜¾ç¤ºé¡ºåºï¼Œé€šå¸¸å›¾å±‚çš„æ˜¾ç¤ºé¡ºåºï¼Œæ˜¯ä½¿ç”¨â€œç”»å®¶çš„ç®—æ³•â€ä¸æ–­è¦†ç›–ä¸Šå»çš„ï¼Œä½†é€šè¿‡æ”¹å˜<code>zPosition</code>å¯ä»¥å°†å›¾å±‚é¡ºåºå‰ç½®</li></ul><h3 id="å›¾å±‚HitTest"><a href="#å›¾å±‚HitTest" class="headerlink" title="å›¾å±‚HitTest"></a>å›¾å±‚HitTest</h3><ul><li>CALayerå¹¶ä¸å…³å¿ƒä»»ä½•å“åº”äº‹ä»¶ä½†æ˜¯å®ƒæœ‰ä¸€ç³»åˆ—çš„æ–¹æ³•å¸®ä½ å¤„ç†äº‹ä»¶ï¼š<code>-containsPoint:</code>å’Œ<code>-hitTest:</code></li><li><code>-containsPoint:</code>æ¥å—ä¸€ä¸ªåœ¨æœ¬å›¾å±‚åæ ‡ç³»ä¸‹çš„CGPointï¼Œå¦‚æœè¿™ä¸ªç‚¹åœ¨å›¾å±‚<code>frame</code>èŒƒå›´å†…å°±è¿”å›YES</li><li><code>-hitTest:</code>æ–¹æ³•åŒæ ·æ¥å—ä¸€ä¸ªCGPointç±»å‹å‚æ•°ï¼Œä½†è¿”å›çš„ä¸æ˜¯BOOLç±»å‹ï¼Œå®ƒè¿”å›å›¾å±‚æœ¬èº«ï¼Œæˆ–è€…åŒ…å«è¿™ä¸ªåæ ‡ç‚¹çš„å¶å­èŠ‚ç‚¹å›¾å±‚</li><li><code>-hitTest:</code>çš„æµ‹ç®—çš„é¡ºåºä¾èµ–äºå›¾å±‚æ ‘çš„é¡ºåºï¼Œå’Œ<code>zPosition</code>æ”¹å˜åæ˜¾ç¤ºé¡ºåºæ— å…³ã€‚æ‰€ä»¥ä½¿ç”¨<code>zPosition</code>æ”¹å˜å›¾å±‚æ˜¾ç¤ºé¡ºåºåï¼Œäº‹ä»¶å°†ä¼šæ— æ³•å“åº”</li></ul><h2 id="è§†è§‰æ•ˆæœ"><a href="#è§†è§‰æ•ˆæœ" class="headerlink" title="è§†è§‰æ•ˆæœ"></a>è§†è§‰æ•ˆæœ</h2><h3 id="åœ†è§’"><a href="#åœ†è§’" class="headerlink" title="åœ†è§’"></a>åœ†è§’</h3><ul><li><code>conrnerRadius</code>å±æ€§æ§åˆ¶ç€å›¾å±‚è§’çš„æ›²ç‡</li><li><p>ä¹¦ä¸­åŸè¯æ˜¯è¿™ä¸ªæ›²ç‡å€¼åªå½±å“èƒŒæ™¯é¢œè‰²è€Œä¸å½±å“èƒŒæ™¯å›¾ç‰‡æˆ–æ˜¯å­å›¾å±‚</p><blockquote><p>æˆ‘è®¤ä¸ºå¯èƒ½å¹¶ä¸æ˜¯é’ˆå¯¹èƒŒæ™¯é¢œè‰²ï¼Œå¯èƒ½æ˜¯å¯¹çˆ¶å›¾å±‚çš„è£å‰ª</p></blockquote></li><li><p><code>masksToBounds</code>è®¾ç½®æˆYESçš„è¯ï¼Œå­å›¾å±‚è¶…å‡ºçˆ¶å›¾å±‚çš„åŒºåŸŸä¼šè¢«è£å‰ªï¼ŒéªŒè¯æˆ‘ä¸Šä¸€æ¡çš„çŒœæµ‹</p></li></ul><h3 id="å›¾å±‚è¾¹æ¡†"><a href="#å›¾å±‚è¾¹æ¡†" class="headerlink" title="å›¾å±‚è¾¹æ¡†"></a>å›¾å±‚è¾¹æ¡†</h3><ul><li><code>borderWidth</code>æè¿°äº†å›¾å±‚è¾¹æ¡†å®½åº¦ï¼Œè¿™ä¸ªè¾¹æ¡†çš„ç»˜åˆ¶æ˜¯æ²¿è£å‰ªåçš„å›¾å±‚è¾¹ç¼˜ï¼Œå¹¶ä¸”ç»˜åˆ¶åœ¨å›¾å±‚è¾¹ç•Œé‡Œé¢çš„ï¼Œè€Œä¸”åœ¨æ‰€æœ‰å­å†…å®¹ä¹‹å‰ï¼Œä¹Ÿåœ¨å­å›¾å±‚ä¹‹å‰</li><li><code>borderColor</code>æè¿°äº†è¾¹æ¡†é¢œè‰²ä¿¡æ¯</li></ul><h3 id="é˜´å½±"><a href="#é˜´å½±" class="headerlink" title="é˜´å½±"></a>é˜´å½±</h3><ul><li>è‹¥éœ€è¦å¢åŠ é˜´å½±è¡¨ç°ï¼Œåªéœ€è¦æ›´æ”¹<code>shadowOpacity</code>å±æ€§ï¼Œä»–æ˜¯ä¸€ä¸ª0.0ï¼ˆä¸å¯è§ï¼‰å’Œ1.0ï¼ˆå®Œå…¨ä¸é€æ˜ï¼‰ä¹‹é—´çš„æµ®ç‚¹æ•°</li><li>è‹¥è¦æ”¹åŠ¨é˜´å½±çš„è¡¨ç°ï¼Œä½ å¯ä»¥ä½¿ç”¨CALayerçš„å¦å¤–ä¸‰ä¸ªå±æ€§ï¼š<code>shadowColor</code>ï¼Œ<code>shadowOffset</code>å’Œ<code>shadowRadius</code></li><li><code>shadowRadius</code>æ§åˆ¶äº†é˜´å½±çš„æ¨¡ç³Šåº¦ï¼Œå½“å®ƒçš„å€¼æ˜¯0çš„æ—¶å€™ï¼Œé˜´å½±å°±å’Œè§†å›¾ä¸€æ ·æœ‰ä¸€ä¸ªéå¸¸ç¡®å®šçš„è¾¹ç•Œçº¿ã€‚å½“å€¼è¶Šæ¥è¶Šå¤§çš„æ—¶å€™ï¼Œè¾¹ç•Œçº¿çœ‹ä¸Šå»å°±ä¼šè¶Šæ¥è¶Šæ¨¡ç³Šå’Œè‡ªç„¶ã€‚è‹¹æœçš„è®¾è®¡ï¼Œæ›´å€¾å‘äºè‡ªç„¶é˜´å½±ï¼Œå³å€¼ä¸º0</li><li>é˜´å½±è·¯å¾„æ˜¯æ ¹æ®å¯„å®¿å›¾è½®å»“æ¥ç¡®å®šçš„</li><li>é˜´å½±ç»˜åˆ¶åœ¨å›¾å±‚å¤–éƒ¨ï¼Œæ‰€ä»¥<code>masksToBounds</code>è®¾ç½®æˆYESçš„è¯ï¼Œé˜´å½±ä¼šè¢«è£å‰ª</li><li>å¦‚æœæƒ³æ²¿ç€å†…å®¹è£åˆ‡ï¼Œåˆæƒ³ä¿ç•™é˜´å½±ï¼Œéœ€è¦ç”¨åˆ°ä¸¤ä¸ªå›¾å±‚ï¼šä¸€ä¸ªåªç”»é˜´å½±çš„ç©ºçš„å¤–å›¾å±‚ï¼Œå’Œä¸€ä¸ªç”¨masksToBoundsè£å‰ªå†…å®¹çš„å†…å›¾å±‚</li><li>å¦‚æœåœ¨å›¾å±‚æ¸²æŸ“å‰çŸ¥é“é˜´å½±å½¢çŠ¶ä¼šæ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œå¯ä»¥æŒ‡å®šä¸€ä¸ª<code>shadowPath</code>æ¥æé«˜æ€§èƒ½</li></ul><h3 id="å›¾å±‚è’™ç‰ˆ"><a href="#å›¾å±‚è’™ç‰ˆ" class="headerlink" title="å›¾å±‚è’™ç‰ˆ"></a>å›¾å±‚è’™ç‰ˆ</h3><ul><li>é€šå¸¸åˆ›å»ºä¸€ä¸ªæ— çŸ©å½¢è§†å›¾æœ€æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå¯ä»¥ç»™å®ƒæŒ‡å®šä¸€ä¸ªé€æ˜è’™æ¿æ¥å®ç°ï¼Œä½¿ç”¨<code>mask</code>å±æ€§ï¼Œè¿™ä¸ªå±æ€§æ‰€æŒ‡å‘çš„ç±»å‹å°±æ˜¯CALayer</li><li><code>mask</code>å›¾å±‚çš„<code>color</code>å±æ€§æ˜¯æ— å…³ç´§è¦çš„ï¼ŒçœŸæ­£é‡è¦çš„æ˜¯å›¾å±‚çš„è½®å»“ã€‚maskå±æ€§å°±åƒæ˜¯ä¸€ä¸ªé¥¼å¹²åˆ‡å‰²æœºï¼Œmaskå›¾å±‚å®å¿ƒçš„éƒ¨åˆ†ä¼šè¢«ä¿ç•™ä¸‹æ¥ï¼Œå…¶ä»–çš„åˆ™ä¼šè¢«æŠ›å¼ƒ</li></ul><h3 id="æ‹‰ä¼¸è¿‡æ»¤"><a href="#æ‹‰ä¼¸è¿‡æ»¤" class="headerlink" title="æ‹‰ä¼¸è¿‡æ»¤"></a>æ‹‰ä¼¸è¿‡æ»¤</h3><ul><li><p>å½“å›¾ç‰‡éœ€è¦æ˜¾ç¤ºä¸åŒçš„å¤§å°çš„æ—¶å€™ï¼Œæœ‰ä¸€ç§å«åšæ‹‰ä¼¸è¿‡æ»¤çš„ç®—æ³•å°±èµ·åˆ°ä½œç”¨äº†ã€‚å®ƒä½œç”¨äºåŸå›¾çš„åƒç´ ä¸Šå¹¶æ ¹æ®éœ€è¦ç”Ÿæˆæ–°çš„åƒç´ æ˜¾ç¤ºåœ¨å±å¹•ä¸Š </p><blockquote><p>æˆ‘çš„ç†è§£ä¾‹å¦‚éœ€è¦å°†ä¸€å¼ 20x20å›¾æ˜¾ç¤ºåœ¨40x40çš„å›¾å±‚ä¸Šï¼Œä¸ºäº†é¿å…å›¾ç‰‡çš„åƒç´ åŒ–ï¼Œé€šè¿‡è¿‡æ»¤ç®—æ³•ç”Ÿæˆæ–°çš„åƒç´ å›¾</p></blockquote></li><li><p><code>minificationFilter</code>å’Œ<code>magnificationFilter</code>å±æ€§æè¿°äº†åœ¨å›¾ç‰‡éœ€è¦ç¼©å°æˆ–æ‹‰ä¼¸æ—¶æ‰€ç”¨çš„è¿‡æ»¤å™¨ç®—æ³•</p></li><li><p>CALayerå¯¹å›¾ç‰‡çš„æ‹‰ä¼¸æä¾›äº†ä¸‰ç§ç®—æ³•</p><ul><li>kCAFilterLinear - é»˜è®¤è¿‡æ»¤å™¨</li><li>kCAFilterNearest - æ•ˆç‡éå¸¸å¿«ï¼Œä½†ä¼šä½¿å¾—å‹ç¼©å›¾ç‰‡æ›´ç³Ÿï¼Œå›¾ç‰‡æ”¾å¤§ä¹‹åä¹Ÿæ˜¾å¾—å—çŠ¶æˆ–æ˜¯é©¬èµ›å…‹ä¸¥é‡</li><li>kCAFilterTrilinear - æé«˜äº†æ€§èƒ½ï¼Œä¹Ÿé¿å…äº†å°æ¦‚ç‡å› èˆå…¥é”™è¯¯å¼•èµ·çš„å–æ ·å¤±çµçš„é—®é¢˜</li></ul></li><li><p>å¦‚æœæ˜¯å¯¹äºæ¯”è¾ƒå°çš„å›¾æˆ–è€…æ˜¯å·®å¼‚ç‰¹åˆ«æ˜æ˜¾ï¼Œæå°‘æ–œçº¿çš„å¤§å›¾ï¼Œé‚£ä¹ˆkCAFilterNearestæ—¢ä¿è¯æ•ˆç‡ï¼ŒåŒæ—¶åˆä¼šä¿ç•™æœ€å¥½çš„å‘ˆç°æ•ˆæœ</p><blockquote><p>kCAFilterLinearå’ŒkCAFilterTrilinearçš„å·®å¼‚å¹¶ä¸æ˜æ˜¾ï¼Œå¦‚æœæ˜¯ç®€å•å›¾ï¼ŒkCAFilterNearestå°†ä¼šæ˜¯æœ€ä¼˜é€‰æ‹©</p></blockquote></li></ul><h3 id="ç»„é€æ˜"><a href="#ç»„é€æ˜" class="headerlink" title="ç»„é€æ˜"></a>ç»„é€æ˜</h3><ul><li>UIViewçš„<code>alpha</code>å±æ€§å’ŒCALayerçš„<code>opacity</code>å±æ€§ï¼Œè¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯å½±å“å­å±‚çº§çš„é€æ˜åº¦çš„</li><li>ç†æƒ³çŠ¶å†µä¸‹ï¼Œå½“è®¾ç½®äº†ä¸€ä¸ªå›¾å±‚çš„é€æ˜åº¦ï¼Œå¸Œæœ›å®ƒåŒ…å«çš„æ•´ä¸ªå›¾å±‚æ ‘åƒä¸€ä¸ªæ•´ä½“ä¸€æ ·çš„é€æ˜æ•ˆæœï¼Œä½†å®é™…æƒ…å†µï¼Œæœ‰å¯èƒ½å› ä¸ºé€æ˜åº¦çš„æ··åˆå åŠ é€ æˆçš„</li><li>ä¸ºäº†é¿å…é€æ˜åº¦æ··åˆé€ æˆçš„è§†è§‰ä¸Šçš„æ··ä¹±ï¼Œå¯ä»¥ä½¿ç”¨<code>shouldRasterize</code>å±æ€§ï¼Œæ¥å®ç°ç»„é€æ˜çš„æ•ˆæœã€‚å¦‚æœè®¾ç½®äº†è¿™ä¸ªå±æ€§ï¼Œåœ¨åº”ç”¨é€æ˜åº¦ä¹‹å‰ï¼Œå›¾å±‚åŠå…¶å­å›¾å±‚éƒ½ä¼šè¢«æ•´åˆæˆä¸€ä¸ªæ•´ä½“çš„å›¾ç‰‡</li><li><p>å¦‚æœä½¿ç”¨äº†shouldRasterizeå±æ€§ï¼Œå°±è¦ç¡®ä¿ä½ è®¾ç½®äº†<code>rasterizationScale</code>å±æ€§å»åŒ¹é…å±å¹•ï¼Œä»¥é˜²æ­¢å‡ºç°Retinaå±å¹•åƒç´ åŒ–çš„é—®é¢˜</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">btn.layer.shouldRasterize = <span class="literal">YES</span>;</span><br><span class="line">btn.layer.rasterizationScale = [<span class="built_in">UIScreen</span> mainScreen].scale;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;å›¾å±‚å‡ ä½•å­¦&quot;&gt;&lt;a href=&quot;#å›¾å±‚å‡ ä½•å­¦&quot; class=&quot;headerlink&quot; title=&quot;å›¾å±‚å‡ ä½•å­¦&quot;&gt;&lt;/a&gt;å›¾å±‚å‡ ä½•å­¦&lt;/h2&gt;&lt;h3 id=&quot;è§†å›¾å’Œå›¾å±‚å¸ƒå±€å·®å¼‚&quot;&gt;&lt;a href=&quot;#è§†å›¾å’Œå›¾å±‚å¸ƒå±€å·®å¼‚&quot; class=&quot;headerlink&quot; ti
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="Core Animation" scheme="http://yoursite.com/tags/Core-Animation/"/>
    
  </entry>
  
  <entry>
    <title>iOS Core Animation - Advanced Techniques-å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰</title>
    <link href="http://yoursite.com/2018/11/01/iOS%20Core%20Animation-%20Advanced%20Techniques-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://yoursite.com/2018/11/01/iOS Core Animation- Advanced Techniques-å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰/</id>
    <published>2018-11-01T11:35:10.000Z</published>
    <updated>2018-11-05T12:54:53.867Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ˜¯é’ˆå¯¹ã€ŠiOS Core Animation: Advanced Techniquesã€‹ç›¸å¯¹é‡è¦çŸ¥è¯†ç‚¹è¿›è¡Œçš„æ€»ç»“ç¬”è®°ï¼Œæ’å›¾å’Œå…·ä½“é‡Šä¹‰è¯·å‚ç…§åŸä¹¦</p><h2 id="å›¾å±‚æ ‘"><a href="#å›¾å±‚æ ‘" class="headerlink" title="å›¾å±‚æ ‘"></a>å›¾å±‚æ ‘</h2><h3 id="æ·±åˆ»ç†è§£å›¾å±‚ä¸è§†å›¾"><a href="#æ·±åˆ»ç†è§£å›¾å±‚ä¸è§†å›¾" class="headerlink" title="æ·±åˆ»ç†è§£å›¾å±‚ä¸è§†å›¾"></a>æ·±åˆ»ç†è§£å›¾å±‚ä¸è§†å›¾</h3><ul><li>è§†å›¾ï¼ˆUIViewï¼‰æ˜¯åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„ï¼Œèƒ½å¤Ÿæ‹¦æˆªç”¨æˆ·è¡Œä¸ºï¼ˆå¦‚æ‰‹åŠ¿è¾“å…¥ï¼‰çš„çŸ©å½¢å—ï¼Œè§†å›¾å…·æœ‰å±‚çº§å…³ç³»å¹¶å¯äº’ç›¸åµŒå¥—ã€‚</li><li>å›¾å±‚ï¼ˆCALayerï¼‰å’Œè§†å›¾ï¼ˆUIViewï¼‰åœ¨æ¦‚å¿µä¸Šç±»ä¼¼ï¼Œå’Œè§†å›¾æœ€å¤§çš„ä¸åŒï¼Œæ˜¯å›¾å±‚ä¸å¤„ç†ç”¨æˆ·è¡Œä¸ºã€‚</li><li>åœ¨iOSå’ŒMacOSä¸¤ä¸ªå¹³å°ä¸Šï¼Œäº‹ä»¶å’Œç”¨æˆ·äº¤äº’æœ‰å¾ˆå¤šä¸åŒï¼ŒUIKitå’ŒAppKitå°±æ˜¯åŸºäºCoreAnimationé’ˆå¯¹ä¸¤ä¸ªå¹³å°çš„ä¸åŒå¤„ç†æ¡†æ¶ã€‚</li></ul><h3 id="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾å±‚"><a href="#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾å±‚" class="headerlink" title="ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾å±‚"></a>ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å›¾å±‚</h3><ul><li>UIViewçš„æ¥å£ä¼˜ç¾è€Œç®€æ´ï¼Œä½†è¿™ç§ç®€å•ä¼šé€ æˆçµæ´»æ€§ä¸Šçš„ç¼ºé™·ã€‚</li><li>UIViewæ²¡æœ‰æš´éœ²å‡ºçš„CALayerä¸€äº›åŠŸèƒ½ï¼š<ul><li>é˜´å½±ï¼Œåœ†è§’ï¼Œå¸¦é¢œè‰²çš„è¾¹æ¡†</li><li>3Då˜æ¢</li><li>éçŸ©å½¢èŒƒå›´</li><li>é€æ˜é®ç½©</li><li>å¤šçº§éçº¿æ€§åŠ¨ç”»</li></ul></li></ul><h3 id="å¦‚ä½•ä½¿ç”¨å›¾å±‚"><a href="#å¦‚ä½•ä½¿ç”¨å›¾å±‚" class="headerlink" title="å¦‚ä½•ä½¿ç”¨å›¾å±‚"></a>å¦‚ä½•ä½¿ç”¨å›¾å±‚</h3><ul><li>UIViewè§†å›¾ç±»å¸¦æœ‰ä¸€ä¸ªCALayerå±æ€§å¯ç›´æ¥ä½¿ç”¨</li><li>æŠŠQuartzCoreå¼•å…¥åˆ°é¡¹ç›®ï¼Œç„¶åè°ƒç”¨CALayeråˆå§‹åŒ–æ–¹æ³•åˆ›å»º</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ViewController.m</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad&#123;</span><br><span class="line">    [<span class="keyword">super</span> viewDidLoad];</span><br><span class="line">    <span class="comment">//create sublayer</span></span><br><span class="line">    <span class="built_in">CALayer</span> *sublayer = [<span class="built_in">CALayer</span> layer];</span><br><span class="line">    sublayer.frame = <span class="built_in">CGRectMake</span>(<span class="number">50.0</span>f, <span class="number">50.0</span>f, <span class="number">100.0</span>f, <span class="number">100.0</span>f);</span><br><span class="line">    sublayer.backgroundColor = [<span class="built_in">UIColor</span> blueColor].CGColor;</span><br><span class="line">    <span class="comment">//add it to view</span></span><br><span class="line">    [<span class="keyword">self</span>.view.layer addSublayer:sublayer];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¯„å®¿å›¾"><a href="#å¯„å®¿å›¾" class="headerlink" title="å¯„å®¿å›¾"></a>å¯„å®¿å›¾</h2><h3 id="contentså±æ€§"><a href="#contentså±æ€§" class="headerlink" title="contentså±æ€§"></a>contentså±æ€§</h3><ul><li>CALayeræœ‰ä¸€ä¸ªå±æ€§<code>contents</code>ï¼Œå®ƒæ˜¯idç±»å‹çš„ï¼Œåœ¨iOSå¹³å°ä¸Šéœ€è¦è¢«èµ‹å€¼çš„ç±»å‹æ˜¯<code>CGImageRef</code>ï¼Œä¸€ä¸ªæŒ‡å‘CGImageç»“æ„çš„æŒ‡é’ˆã€‚åœ¨Macå¹³å°ä¸Šéœ€è¦è¢«èµ‹å€¼<code>NSImage</code>å¯¹è±¡</li><li><code>contents</code>å±æ€§èƒ½å¤Ÿè®©å›¾å±‚ä¸ä»…å±•ç¤ºä¸€ä¸ªèƒŒæ™¯è‰²ï¼Œå¯ä»¥å±•ç¤ºä¸€ä¸ªå›¾ç‰‡</li></ul><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ViewController.m</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)viewDidLoad</span><br><span class="line">&#123;</span><br><span class="line">  [<span class="keyword">super</span> viewDidLoad]; <span class="comment">//load an image</span></span><br><span class="line">  <span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"xxx.png"</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//add it directly to our view's layer</span></span><br><span class="line">  <span class="keyword">self</span>.layerView.layer.contents = (__bridge <span class="keyword">id</span>)image.CGImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="contentGravityå±æ€§"><a href="#contentGravityå±æ€§" class="headerlink" title="contentGravityå±æ€§"></a>contentGravityå±æ€§</h3><ul><li>ç±»ä¼¼äºUIImageViewçš„<code>contentMode</code>ï¼Œåœ¨CALayerä¸­å¯¹åº”çš„å±æ€§å«åš<code>contentsGravity</code>ï¼Œå®ƒæ˜¯ä¸€ä¸ªNSStringç±»å‹ï¼Œå¯é€‰å¸¸é‡ï¼š<ul><li><code>kCAGravityCenter</code>        æ°´å¹³å‚ç›´å±…ä¸­</li><li><code>kCAGravityTop</code>            æ°´å¹³å±…ä¸­ï¼Œé¡¶éƒ¨è¾¹ç¼˜ä¸º0</li><li><code>kCAGravityBottom</code>        æ°´å¹³å±…ä¸­ï¼Œåº•éƒ¨è¾¹ç¼˜ä¸º0</li><li><code>kCAGravityLeft</code>            å‚ç›´å±…ä¸­ï¼Œå·¦éƒ¨è¾¹ç¼˜ä¸º0</li><li><code>kCAGravityRight</code>            å‚ç›´å±…ä¸­ï¼Œå³éƒ¨è¾¹ç¼˜ä¸º0</li><li><code>kCAGravityTopLeft</code>        å·¦ä¸Šè¾¹ç¼˜ä¸º0</li><li><code>kCAGravityTopRight</code>        å³ä¸Šè¾¹ç¼˜ä¸º0</li><li><code>kCAGravityBottomLeft</code>    å·¦ä¸‹è¾¹ç¼˜ä¸º0</li><li><code>kCAGravityBottomRight</code>    å³ä¸‹è¾¹ç¼˜ä¸º0</li><li><code>kCAGravityResize</code>        æ ¹æ®å›¾å±‚å¤§å°æ‹‰ä¼¸</li><li><code>kCAGravityResizeAspect</code>            æ•´ä¸ªå›¾ç‰‡ç­‰æ¯”æ¸²æŸ“å…¨éƒ¨å±•ç¤ºåˆ°å›¾å±‚ï¼Œå¯èƒ½ä¼šæœ‰ç•™ç™½</li><li><code>kCAGravityResizeAspectFill</code>    æ•´ä¸ªå›¾ç‰‡ç­‰æ¯”æ¸²æŸ“é“ºæ»¡å›¾å±‚ï¼Œå›¾ç‰‡å¯èƒ½è¢«æˆªæ–­</li></ul></li></ul><h3 id="contentsScaleå±æ€§"><a href="#contentsScaleå±æ€§" class="headerlink" title="contentsScaleå±æ€§"></a>contentsScaleå±æ€§</h3><ul><li><code>contentsScale</code>å±æ€§å®šä¹‰äº†å¯„å®¿å›¾çš„åƒç´ å°ºå¯¸å’Œè§†å›¾å¤§å°çš„æ¯”ä¾‹ï¼Œé»˜è®¤æƒ…å†µä¸‹å®ƒæ˜¯ä¸€ä¸ªå€¼ä¸º1.0çš„æµ®ç‚¹æ•°ã€‚</li><li>è¿™ä¸ªå±æ€§åœ¨å¼€å‘ä¸­æ²¡æœ‰æ‰¾åˆ°å…·ä½“çš„åº”ç”¨åœºæ™¯ï¼Œä¸å»ºè®®ç›´æ¥ä½¿ç”¨</li></ul><h3 id="maskToBoundså±æ€§"><a href="#maskToBoundså±æ€§" class="headerlink" title="maskToBoundså±æ€§"></a>maskToBoundså±æ€§</h3><ul><li>å°†è¶…å‡ºå›¾å±‚è¾¹ç•Œçš„å†…å®¹æˆªæ–­</li><li>ã€æ³¨æ„ã€‘è®¾ç½®é˜´å½±ä¹Ÿä¼šè¢«è¿™ä¸ªå±æ€§æˆªæ–­ï¼Œå› ä¸ºé˜´å½±æ˜¯ç»˜åˆ¶åœ¨å›¾å±‚å¤–çš„</li></ul><h3 id="contentsRectå±æ€§"><a href="#contentsRectå±æ€§" class="headerlink" title="contentsRectå±æ€§"></a>contentsRectå±æ€§</h3><ul><li>è¿™ä¸ªå±æ€§å…è®¸æˆ‘ä»¬é€‰æ‹©å¯„å®¿å›¾çš„ä¸€ä¸ªå­åŸŸï¼Œè¿™ä¸ªå±æ€§æ¯”<code>contentGravity</code>æ›´çµæ´»</li><li>å’Œ<code>bounds</code>ï¼Œ<code>frame</code>ä¸åŒï¼Œ<code>contentsRect</code>ä¸æ˜¯æŒ‰ç‚¹æ¥è®¡ç®—çš„ï¼Œå®ƒä½¿ç”¨äº†å•ä½åæ ‡ï¼Œå•ä½åæ ‡æŒ‡å®šåœ¨0åˆ°1ä¹‹é—´ï¼Œæ˜¯ä¸€ä¸ªç›¸å¯¹å€¼ï¼ˆåƒç´ å’Œç‚¹å°±æ˜¯ç»å¯¹å€¼ï¼‰</li><li>é»˜è®¤çš„<code>contentsRect</code>æ˜¯{0, 0, 1, 1}ï¼Œæ„å‘³ç€æ•´ä¸ªå›¾ç‰‡å¯è§</li><li>é€šè¿‡è¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°Image Spritesï¼ˆå›¾ç‰‡æ‹¼åˆæŠ€æœ¯ï¼‰ï¼Œå›¾ç‰‡æ‹¼åˆåå¯ä»¥æ‰“åŒ…æ•´åˆåˆ°ä¸€å¼ å¤§å›¾ä¸Šä¸€æ¬¡æ€§è½½å…¥ã€‚ç›¸æ¯”å¤šæ¬¡è½½å…¥ä¸åŒçš„å›¾ç‰‡ï¼Œè¿™æ ·åšèƒ½å¤Ÿå¸¦æ¥å¾ˆå¤šæ–¹é¢çš„å¥½å¤„ï¼šå†…å­˜ä½¿ç”¨ï¼Œè½½å…¥æ—¶é—´ï¼Œæ¸²æŸ“æ€§èƒ½ç­‰ç­‰ã€‚</li><li>å›¾ç‰‡æ‹¼åˆæŠ€æœ¯åœ¨æ¸¸æˆä¸­åº”ç”¨è¾ƒå¤šï¼Œå¦‚ä¸€æ®µè¿ç»­çš„å¥”è·‘åŠ¨ç”»ğŸƒ</li></ul><h3 id="contentsCenterå±æ€§"><a href="#contentsCenterå±æ€§" class="headerlink" title="contentsCenterå±æ€§"></a>contentsCenterå±æ€§</h3><ul><li><code>contentsCenter</code>æ˜¯ä¸€ä¸ªCGRectç»“æ„ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªå›ºå®šçš„è¾¹æ¡†å’Œä¸€ä¸ªåœ¨å›¾å±‚ä¸Šå¯æ‹‰ä¼¸çš„åŒºåŸŸã€‚</li><li>å®ƒçš„å·¥ä½œæ•ˆæœå’ŒUIImageé‡Œçš„<code>-resizableImageWithCapInsets:</code>æ–¹æ³•æ•ˆæœéå¸¸ç±»ä¼¼</li><li>åœ¨å¼€å‘ä¸­ç›®å‰è¿˜æ²¡æœ‰å®é™…è¿ç”¨åˆ°å®ƒï¼Œåº”ç”¨åæ›´æ–°ä½¿ç”¨åœºæ™¯</li></ul><h3 id="è§†å›¾-drawRect-æ–¹æ³•"><a href="#è§†å›¾-drawRect-æ–¹æ³•" class="headerlink" title="è§†å›¾-drawRect:æ–¹æ³•"></a>è§†å›¾-drawRect:æ–¹æ³•</h3><ul><li>è®¾ç½®å¯„å®¿å›¾çš„æ–¹æ³•ï¼Œä¸æ­¢æœ‰ç»™<code>contents</code>å±æ€§èµ‹å€¼è¿™ç§æ–¹å¼ï¼Œè¿˜èƒ½å¤Ÿé€šè¿‡ç»§æ‰¿UIViewå¹¶å®ç°<code>-drawRect:</code>æ–¹æ³•æ¥è‡ªå®šä¹‰ç»˜åˆ¶</li><li>å¯„å®¿å›¾ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯åªè¦UIViewæ£€æµ‹åˆ°<code>-drawRect:</code>ï¼Œé‚£ä¹ˆç³»ç»Ÿå°±ä¼šä¸ºè¿™ä¸ªè§†å›¾å›¾å±‚åˆ†é…ä¸€ä¸ªå¯„å®¿å›¾ï¼Œè¯¥å¯„å®¿å›¾çš„å°ºå¯¸ç­‰äºè§†å›¾å¤§å°ä¹˜ä»¥ <code>contentsScale</code>çš„å€¼</li><li>å¦‚æœä¸éœ€è¦å¯„å®¿å›¾ï¼Œ<code>-drawRect:</code>è¯·ä¸è¦å®ç°ï¼Œä¼šæµªè´¹èµ„æº</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ¬æ–‡æ˜¯é’ˆå¯¹ã€ŠiOS Core Animation: Advanced Techniquesã€‹ç›¸å¯¹é‡è¦çŸ¥è¯†ç‚¹è¿›è¡Œçš„æ€»ç»“ç¬”è®°ï¼Œæ’å›¾å’Œå…·ä½“é‡Šä¹‰è¯·å‚ç…§åŸä¹¦&lt;/p&gt;
&lt;h2 id=&quot;å›¾å±‚æ ‘&quot;&gt;&lt;a href=&quot;#å›¾å±‚æ ‘&quot; class=&quot;headerlink&quot; title=&quot;å›¾å±‚æ ‘&quot;&gt;
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
      <category term="Core Animation" scheme="http://yoursite.com/tags/Core-Animation/"/>
    
  </entry>
  
  <entry>
    <title>JavaScriptå¼‚æ­¥å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶</title>
    <link href="http://yoursite.com/2018/10/14/JavaScript%E5%BC%82%E6%AD%A5%E5%92%8C%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6/"/>
    <id>http://yoursite.com/2018/10/14/JavaScriptå¼‚æ­¥å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶/</id>
    <published>2018-10-14T13:05:24.000Z</published>
    <updated>2018-10-14T13:08:23.570Z</updated>
    
    <content type="html"><![CDATA[<p>JavaScriptï¼ˆä»¥ä¸‹ç®€ç§°jsï¼‰çš„è¯­è¨€æ‰§è¡Œç¯å¢ƒæ˜¯å•çº¿ç¨‹ï¼ˆsingle threadï¼‰çš„ï¼Œè¿™æ˜¯å…¶ç”¨é€”è€Œå†³å®šçš„ï¼Œä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼Œjsçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMï¼Œåœ¨iOSå¼€å‘ä¸Šçš„ç†è§£å°±æ˜¯æ“ä½œUIï¼ˆåªæœ‰ä¸»çº¿ç¨‹æ‰èƒ½å¯¹UIè¿›è¡Œæ“ä½œï¼‰ã€‚æ‰€ä»¥ä¸ºäº†é¿å…è¯­è¨€çš„å¤æ‚æ€§ï¼Œå•çº¿ç¨‹æˆä¸ºäº†jsçš„æ ¸å¿ƒç‰¹è´¨ï¼Œå°†æ¥ä¹Ÿä¸ä¼šè½»æ˜“æ”¹å˜ã€‚</p><p>ä½†å¼‚æ­¥ç¼–ç¨‹åˆéå¸¸é‡è¦ï¼Œæ²¡æœ‰å¼‚æ­¥æ“ä½œåœ¨è¿›è¡Œè€—æ—¶ä»»åŠ¡å¡é¡¿æ„Ÿä¼šéå¸¸ä¸¥é‡ã€‚æ‰€ä»¥ç›®å‰JavaScriptä¸»è¦æä¾›äº†ä¸‰ç§å¼‚æ­¥æ–¹å¼ï¼šå›è°ƒå‡½æ•°ã€äº‹ä»¶ç›‘å¬ã€Promiseå¯¹è±¡ã€‚</p><p>è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†ä½¿ç”¨ä¸‰ç§æ–¹å¼å®ç°åŒä¸€ä¸ªç™»å½•ç½‘ç»œè¯·æ±‚çš„Mockæ–¹æ³•ï¼Œæ¥æ¨¡æ‹Ÿjsçš„å¼‚æ­¥æ‰§è¡Œã€‚</p><h2 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p>åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬çš„ä¸€èˆ¬åšæ³•å°±æ˜¯åœ¨å‚æ•°ä¸­æŒ‡å®šå›è°ƒå‡½æ•°ï¼Œç›´è§‚å¹¶ä¸”å®¹æ˜“ç†è§£ã€‚åœ¨jsä¸­åšæ³•å¯èƒ½æ›´åŠ è‡ªç”±ï¼Œä¾‹å¦‚å¾®ä¿¡å°ç¨‹åºOpenApiï¼Œç›´æ¥æŒ‡å®šå‚æ•°ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡åˆ†åˆ«æŒ‡å®šç›¸å…³å‚æ•°å’Œå›è°ƒï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wx.request(&#123;</span><br><span class="line">  url: <span class="string">'test.php'</span>, <span class="comment">//ä»…ä¸ºç¤ºä¾‹ï¼Œå¹¶éçœŸå®çš„æ¥å£åœ°å€</span></span><br><span class="line">  data: &#123;</span><br><span class="line">    x: <span class="string">''</span>,</span><br><span class="line">    y: <span class="string">''</span></span><br><span class="line">  &#125;,</span><br><span class="line">  header: &#123;</span><br><span class="line">    <span class="string">'content-type'</span>: <span class="string">'application/json'</span> <span class="comment">// é»˜è®¤å€¼</span></span><br><span class="line">  &#125;,</span><br><span class="line">  success (res) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res.data)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼å®ç°å¼‚æ­¥å›è°ƒï¼Œä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request_callback</span>(<span class="params">url, param, success, fail</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚:'</span> + url + <span class="string">'ä¸­...'</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">            success(response, param);   </span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            fail(error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">request_callback(url, params, </span><br><span class="line">    (response, params) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·åï¼š'</span> + params.name);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¯†ç ï¼š'</span> + params.sec);</span><br><span class="line">    &#125;,</span><br><span class="line">    (error) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶ç›‘å¬"><a href="#äº‹ä»¶ç›‘å¬" class="headerlink" title="äº‹ä»¶ç›‘å¬"></a>äº‹ä»¶ç›‘å¬</h2><p>è¯¥å®ç°å€Ÿé‰´jQueryçš„triggerå†™æ³•ï¼Œç±»ä¼¼äºiOSå¼€å‘ä¸­çš„æ¶ˆæ¯é€šçŸ¥ï¼ˆä¸€å¯¹å¤šï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> listener;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request_trigger</span>(<span class="params">url, params</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚:'</span> + url + <span class="string">'ä¸­...'</span>);</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">            listener.trigger(<span class="string">'success'</span>, response);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            listener.trigger(<span class="string">'fail'</span>, error);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">listener.on(<span class="string">'success'</span>, (response, params) =&gt; &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(response);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·åï¼š'</span> + params.name);</span><br><span class="line">   <span class="built_in">console</span>.log(<span class="string">'å¯†ç ï¼š'</span> + params.sec);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">listener.on(<span class="string">'fail'</span>, (error) =&gt; &#123;</span><br><span class="line">   <span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p>æ¯”è¾ƒå®˜æ–¹çš„è§£é‡Šï¼šPromiseå¯¹è±¡æ˜¯ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼ˆä»£ç†ä¸€ä¸ªå€¼ï¼‰ï¼Œè¢«ä»£ç†çš„å€¼åœ¨Promiseå¯¹è±¡åˆ›å»ºæ—¶å¯èƒ½æ˜¯æœªçŸ¥çš„ã€‚å®ƒå…è®¸ä½ ä¸ºå¼‚æ­¥æ“ä½œçš„æˆåŠŸå’Œå¤±è´¥åˆ†åˆ«ç»‘å®šç›¸åº”çš„å¤„ç†æ–¹æ³•ï¼ˆhandlersï¼‰ã€‚</p><p>ä¸ªäººç†è§£ï¼ŒPromiseå°±æ˜¯å¯¹ä¸€ä¸ªå¼‚æ­¥æµç¨‹çš„å°è£…ï¼ŒES6ä¸ºè¿™ç§æµç¨‹çš„å°è£…æä¾›äº†ä¸€ç§æ ‡å‡†çš„æ–¹æ³•ï¼Œå¹¶å–äº†ä¸€ä¸ªå¥½å¬çš„åå­—ã€‚Promiseè¯‘ä¸ºæ‰¿è¯ºï¼Œæ‰¿è¯ºé‚£ä¹ˆå°±è¦æœ‰åé¦ˆï¼ŒPromiseå°±æ˜¯è§„èŒƒäº†è¿™ç§åé¦ˆçš„æ–¹å¼ï¼Œç”±ç¨‹åºå‘˜å†³å®šåé¦ˆçš„æ—¶æœºã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å£°æ˜</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request_promise</span>(<span class="params">url, params</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚:'</span> + url + <span class="string">'ä¸­...'</span>);</span><br><span class="line">    <span class="comment">//Promise æ–°å»ºåå°±ä¼šç«‹å³æ‰§è¡Œ</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!error) &#123;</span><br><span class="line">                resolve(response);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                reject(error);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">request_promise(url, params)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·åï¼š'</span> + params.name);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¯†ç ï¼š'</span> + params.sec);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><p>é˜®ä¸€å³°å¤§ç¥åœ¨ES6å…¥é—¨ä¸­ï¼Œä¸¾äº†ä¸€ä¸ªä½¿ç”¨Promiseå°è£…å›¾ç‰‡åŠ è½½çš„ä¾‹å­ï¼Œé€šè¿‡è¿™ä¸ªä¾‹å­æˆ‘ä»¬å¯ä»¥æ›´æ·±åˆ»ç†è§£Promiseå¯¹å¼‚æ­¥&lt;æµç¨‹&gt;çš„å°è£…ï¼Œè¿™ç§æ–¹å¼éå¸¸ç¾å¦™ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadImageAsync</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">const</span> image = <span class="keyword">new</span> Image();</span><br><span class="line">        image.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            resolve(image);</span><br><span class="line">        &#125;;</span><br><span class="line">        image.onerror = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'Could not load image at '</span> + url));</span><br><span class="line">        &#125;;</span><br><span class="line">        image.src = url;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Promiseå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶"><a href="#Promiseå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶" class="headerlink" title="Promiseå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶"></a>Promiseå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶</h2><p>è§£å†³å¼‚æ­¥å›è°ƒï¼Œå¯æ˜¯åå°æ¥å£å¹¶ä¸å¦‚æˆ‘ä»¬å‰ç«¯ç¨‹åºå‘˜æƒ³çš„é‚£ä¹ˆå¥½ç”¨ã€‚å¦‚æœæˆ‘ä»¬è¦åœ¨è¯·æ±‚ç™»å½•ä¹‹å‰ï¼Œéœ€è¦å…ˆè¯·æ±‚initæ¥å£è·å–åˆå§‹åŒ–æ•°æ®ï¼Œé‚£ä»£ç ä¼šå˜æˆä»€ä¹ˆæ ·ï¼Ÿçœ‹ä¸‹é¢è¿™æ®µä»£ç ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 1. è¯·æ±‚initè·å–åˆå§‹åŒ–æ•°æ®</span></span><br><span class="line"><span class="comment"> * 2. è¯·æ±‚ç™»å½•</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">request_callback(initUrl, params, </span><br><span class="line">    (response, params) =&gt; &#123;</span><br><span class="line">        <span class="comment">//åµŒå¥—</span></span><br><span class="line">        request_callback(url, params,</span><br><span class="line">            (response, params) =&gt; &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(response);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·åï¼š'</span> + params.name);</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'å¯†ç ï¼š'</span> + params.sec);</span><br><span class="line">            &#125;,</span><br><span class="line">            (error) =&gt; &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(error);</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;,</span><br><span class="line">    (error) =&gt; &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>è¿™æ ·çš„åµŒå¥—æ–¹å¼ï¼Œç®€ç›´å°±æ˜¯ç¾éš¾ï¼Œä½¿ç”¨Promiseçš„é“¾å¼è¯­æ³•ï¼Œå¯ä»¥å°†ä¸Šè¿°ä»£ç é‡æ„æˆè¿™æ ·ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">requestInitUrl</span>(<span class="params">url</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚'</span> + url + <span class="string">'å‰éœ€å…ˆè¯·æ±‚'</span> + initUrl);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'è¯·æ±‚:'</span> + initUrl + <span class="string">'ä¸­...'</span>);</span><br><span class="line">        setTimeout(resolve, <span class="number">4000</span>, url);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">url, params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹è¯·æ±‚...'</span>);</span><br><span class="line">        setTimeout(resolve, <span class="number">4000</span>, url);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">request(url, params)</span><br><span class="line">    .then(requestInitUrl)</span><br><span class="line">    .then(request_promise)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(response);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ç”¨æˆ·åï¼š'</span> + params.name);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'å¯†ç ï¼š'</span> + params.sec);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure><h2 id="Generatorå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶"><a href="#Generatorå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶" class="headerlink" title="Generatorå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶"></a>Generatorå®ç°å¼‚æ­¥æµç¨‹æ§åˆ¶</h2><p>é€šè¿‡ä¸Šä¸ªSectionä»£ç çš„å®ç°ï¼Œçœ‹æ ·å­æ˜¯è§£å†³äº†é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å´éœ€è¦å®ç°ä¸€ä¸ªrequestInitUrlå‡½æ•°æ¥å°è£…ç¬¬ä¸€æ¬¡initè¯·æ±‚ï¼Œå¹¶ä¸”ç¬¬äºŒæ¬¡è¯·æ±‚çš„å‚æ•°å’Œè°ƒç”¨å¹¶ä¸åœ¨ä¸€èµ·ï¼Œæ€»æ„Ÿè§‰ä¸æ˜¯å¾ˆä¼˜é›…ã€‚å€¼å¾—å¼€å¿ƒçš„æ˜¯ï¼ŒES6ä¸­æä¾›äº†æ–°çš„è§£å†³æ–¹æ¡ˆGeneratorï¼Œä¸Šè¿°ä»£ç å¯ä»¥é‡æ„æˆè¿™æ ·ï¼Œæ— éœ€å†é‡æ–°å°è£…ä¸€ä¸ªåˆå§‹åŒ–è¯·æ±‚çš„Promiseå¯¹è±¡ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">fullRequest_generator</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">yield</span> request_promise(initUrl)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åˆå§‹åŒ–'</span> + response);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">yield</span> request_promise(url, params)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ç™»å½•'</span> + response);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'finish'</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">var</span> fr_g = fullRequest_generator();</span><br><span class="line"><span class="comment">//é”™è¯¯çš„è°ƒç”¨æ–¹å¼</span></span><br><span class="line"><span class="comment">// fr_g.next();</span></span><br><span class="line"><span class="comment">// fr_g.next();</span></span><br><span class="line"><span class="comment">// fr_g.next();</span></span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåæˆ‘ä»¬ä¼šå‘ç°ï¼Œç¨‹åºæ‰§è¡Œçš„ç»“æœå¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„å¼‚æ­¥æ§åˆ¶ï¼Œæ‰€æœ‰çš„è¯·æ±‚å…¶å®æ˜¯ã€åŒæ­¥ã€‘æ‰§è¡Œçš„ã€‚</p><p>æ‰€ä»¥ï¼Œä¸€ä¸ªå•çº¯çš„Generatorå¹¶ä¸èƒ½å®Œæˆå¼‚æ­¥æ§åˆ¶ã€‚Generatorå¼‚æ­¥éœ€è¦ä¸¤ä¸ªæ¡ä»¶ï¼Œä¸€æ˜¯æ¯ä¸ªyieldè¡¨è¾¾å¼è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼ŒäºŒæ˜¯éœ€è¦ä¸€ä¸ªæ‰§è¡Œå™¨ã€‚é€šè¿‡å¼•å…¥â€™coâ€™æ¨¡å—ï¼Œè§£å†³äº†å¼‚æ­¥æ‰§è¡Œçš„é—®é¢˜ï¼Œå°†ä»¥ä¸Šä»£ç æ”¹ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line"><span class="keyword">const</span> co = <span class="built_in">require</span>(<span class="string">'co'</span>)</span><br><span class="line">co(fr_g)</span><br></pre></td></tr></table></figure><p>ps: coæ¨¡å—æ˜¯è‘—åç¨‹åºå‘˜ TJ Holowaychuk äº 2013 å¹´ 6 æœˆå‘å¸ƒçš„ä¸€ä¸ªå°å·¥å…·ï¼Œç”¨äº Generatorå‡½æ•°çš„è‡ªåŠ¨æ‰§è¡Œã€‚</p><h2 id="Async-Await"><a href="#Async-Await" class="headerlink" title="Async/Await"></a>Async/Await</h2><p>ä½œä¸ºä¸€ä¸ªå‚²å¨‡çš„ç¨‹åºå‘˜ï¼Œå¼•å…¥åˆ«äººçš„æ¨¡å—ä¸‡ä¸€å‡ºé—®é¢˜è¿˜è¦å»è¯»æºç ï¼Œä¸æ˜¯è‡ªå·±å†™çš„ä»£ç æ€»æœ‰ç‚¹ä¸æ”¾å¿ƒã€‚æ‰€ä»¥åœ¨ES7ä¸­ï¼Œæä¾›äº†Generatorå‡½æ•°çš„è¯­æ³•ç³–Async/Awaitè§£å†³äº†Generatorå¼‚æ­¥æ‰§è¡Œçš„é—®é¢˜ã€‚Asyncå‡½æ•°çš„å®ç°ï¼Œå°±æ˜¯å°†Generatorå‡½æ•°å’Œè‡ªåŠ¨æ‰§è¡Œå™¨ï¼ŒåŒ…è£…åœ¨ä¸€ä¸ªå‡½æ•°é‡Œã€‚æˆ‘ä»¬å°†ä¸Šè¿°ä»£ç é‡æ„æˆå¦‚ä¸‹ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fullRequest_async</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹ä»»åŠ¡'</span>);</span><br><span class="line">    <span class="keyword">await</span> request_promise(initUrl)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'åˆå§‹åŒ–'</span> + response);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">await</span> request_promise(url, params)</span><br><span class="line">    .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ç™»å½•'</span> + response);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç»“æŸä»»åŠ¡'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œ</span></span><br><span class="line">fullRequest_async();</span><br></pre></td></tr></table></figure><p>çœ‹åˆ°ä»¥ä¸Šä»£ç çš„å®ç°ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰éå¸¸ä¼˜é›…ç¾ä¸½å¹¶ä¸”é…·ç‚«ï¼Œæˆ‘ä»¬ä¸ç”¨å•ç‹¬å£°æ˜æµç¨‹å‡½æ•°ï¼Œä¹Ÿä¸ç”¨å¼•å…¥æ‰§è¡Œå™¨ï¼Œå°±å®Œæˆäº†å¼‚æ­¥ä»»åŠ¡çš„æµç¨‹æ§åˆ¶ï¼Œå¹¶ä¸”æå‡äº†ä»£ç çš„å¯è¯»æ€§ã€‚(à¹‘â€¢Ì€ã…‚â€¢Ì)Ùˆâœ§</p><p>å¦‚æœè¦å°†ä»»åŠ¡ç»“æœæŠ›å‡ºï¼Œåˆ™ä¸Šè¿°ä»£ç è¿˜å¯ä»¥é‡æ„ä¸ºï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fullRequest_async</span>(<span class="params">comp, fail</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'å¼€å§‹ä»»åŠ¡'</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">await</span> request_promise(initUrl)</span><br><span class="line">        .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'åˆå§‹åŒ–'</span> + response);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">await</span> request_promise(url, params)</span><br><span class="line">        .then(<span class="function">(<span class="params">response</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">'ç™»å½•'</span> + response);</span><br><span class="line">        &#125;)</span><br><span class="line">        comp();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">        fail(error);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fullRequest_async(</span><br><span class="line">()=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç»“æŸä»»åŠ¡'</span>);</span><br><span class="line">&#125;,</span><br><span class="line">(err)=&gt;&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'ç»ˆæ­¢ä»»åŠ¡'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="äº‹ä»¶å¾ªç¯æœºåˆ¶"><a href="#äº‹ä»¶å¾ªç¯æœºåˆ¶" class="headerlink" title="äº‹ä»¶å¾ªç¯æœºåˆ¶"></a>äº‹ä»¶å¾ªç¯æœºåˆ¶</h2><p>è®²äº†ä»£ç çš„å®ç°æ–¹å¼ï¼Œè®©æˆ‘ä»¬ç®€å•æ¢ç©¶ä¸‹jsåº•å±‚å¯¹å¼‚æ­¥ä»»åŠ¡çš„å¤„ç†æœºåˆ¶</p><p><img src="/2018/10/14/JavaScriptå¼‚æ­¥å’Œäº‹ä»¶å¾ªç¯æœºåˆ¶/bg2014100802.png" alt=""></p><p>ç”±äºjsçš„å•çº¿ç¨‹æœºåˆ¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æš‚æ—¶ä¸ç®¡çº¿ç¨‹è¿™ä¸ªæ¦‚å¿µï¼Œå°†æ‰€æœ‰å³å°†æ‰§è¡Œçš„ä»»åŠ¡åˆ†ä¸ºåŒæ­¥ä»»åŠ¡ï¼ˆsynchronousï¼‰ï¼Œå’Œå¼‚æ­¥ä»»åŠ¡ï¼ˆasynchronousï¼‰ã€‚åŒæ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œåœ¨å†…å­˜æ ˆä¸Šæ’é˜Ÿæ‰§è¡Œçš„ä»»åŠ¡ï¼Œåªæœ‰å‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½æ‰§è¡Œåä¸€ä¸ªä»»åŠ¡ï¼›å¼‚æ­¥ä»»åŠ¡æŒ‡çš„æ˜¯ï¼Œå½“æŸä¸ªäº‹ä»¶å®Œæˆè§¦å‘è€Œè¿›å…¥â€ä»»åŠ¡é˜Ÿåˆ—â€ï¼ˆtask queueï¼‰çš„ä»»åŠ¡ã€‚è€Œè¯»å–ä»»åŠ¡é˜Ÿåˆ—ä¸­ä»»åŠ¡çš„æ“ä½œï¼Œæ°¸è¿œæ˜¯åœ¨æ ˆä¸­ä»»åŠ¡æ‰§è¡Œå®Œæˆåçš„ã€‚</p><p>ä¸»çº¿ç¨‹ä»â€ä»»åŠ¡é˜Ÿåˆ—â€ä¸­è¯»å–äº‹ä»¶ï¼Œè¿™ä¸ªè¿‡ç¨‹æ˜¯å¾ªç¯ä¸æ–­çš„ï¼Œæ‰€ä»¥æ•´ä¸ªçš„è¿™ç§è¿è¡Œæœºåˆ¶åˆç§°ä¸ºEvent Loopï¼ˆäº‹ä»¶å¾ªç¯ï¼‰ã€‚</p><p>ä¸€ä¸ªä¾‹å­ï¼š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">req.open(<span class="string">'GET'</span>, url);    </span><br><span class="line">req.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;;    </span><br><span class="line">req.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;;    </span><br><span class="line">req.send();</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> req = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">req.open(<span class="string">'GET'</span>, url);        </span><br><span class="line">req.send();</span><br><span class="line">req.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;;    </span><br><span class="line">req.onerror = <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;&#125;;</span><br></pre></td></tr></table></figure><p>å¦‚æœç”¨iOSå¼€å‘çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬æ˜¯ä¸ç¡®å®š<code>onload</code>å’Œ<code>onerror</code>å›è°ƒæ—¶æœºçš„ï¼Œä½†æ˜¯åœ¨jsçš„äº‹ä»¶å¾ªç¯ä¸­ï¼Œè¿™ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>ä»å‡ ç§å¼‚æ­¥å›è°ƒæ–¹å¼æ¥çœ‹ï¼Œä¸è®ºæ˜¯å›è°ƒå‡½æ•°ã€äº‹ä»¶è¿˜æ˜¯Promiseï¼Œå…ä¸äº†å¥—å¨ƒçš„æ„Ÿè§‰ã€‚äºæˆ‘ä¸ªäººçš„å¼€å‘ä¹ æƒ¯ï¼Œæ¯”è¾ƒå–œæ¬¢ä½¿ç”¨ç±»ä¼¼å¾®ä¿¡å°ç¨‹åºApiçš„å›è°ƒæ–¹å¼ï¼Œå°†å‚æ•°å’Œå›è°ƒé€šè¿‡å¯¹è±¡å°è£…åä¼ å‚çš„å½¢å¼ï¼Œè¿™æ ·çš„å†™æ³•æ›´åŠ è‡ªç”±ï¼Œæ¸…çˆ½ï¼Œå¹¶ä¸”å®¹æ˜“æ§åˆ¶ï¼ˆæœ€ä¸»è¦çš„æ˜¯ä½œä¸ºä¸€ä¸ªiOSeræ¯«æ— å­¦ä¹ å‹åŠ›ï¼‰ã€‚</p><p>äº‹ä»¶ç›‘å¬çš„æ–¹å¼å¯ä»¥å°†å›è°ƒçš„å®ç°å’Œè°ƒç”¨åˆ†ç¦»å¼€ï¼Œè¾¾åˆ°è§£è€¦çš„ç›®çš„ï¼Œé€»è¾‘åˆ†ç¦»æ‰€å¸¦æ¥çš„é—®é¢˜å°±æ˜¯ä»£ç ç†è§£æˆæœ¬ã€ç»´æŠ¤æˆæœ¬çš„æé«˜ã€‚</p><p>Promiseå°è£…äº†æ•´ä¸ªå¼‚æ­¥æµç¨‹ï¼Œç›¸å¯¹äºå›è°ƒå‡½æ•°å’Œäº‹ä»¶ï¼Œå¯ä»¥ç”¨æ›´ä¼˜é›…çš„æ–¹å¼åšæ›´å¤šçš„äº‹æƒ…ï¼Œä¾‹å¦‚å¤šä¸ªå¼‚æ­¥ä»»åŠ¡çš„ä¸²è¡Œå®ç°ï¼Œä½†éœ€è¦æ·±åˆ»ç†è§£Promiseå¯¹è±¡çš„å®ç°æœºåˆ¶ï¼Œæé«˜äº†å­¦ä¹ æˆæœ¬ã€‚</p><p>ES6æä¾›çš„Generatorå‡½æ•°å°†å¼‚æ­¥ä»£ç ä½¿ç”¨åŒæ­¥ä»£ç çš„å½¢å¼è¡¨ç°ï¼Œä½†å¹¶ä¸èƒ½ç›´æ¥è§£å†³å¼‚æ­¥æµç¨‹æ§åˆ¶ï¼Œéœ€è¦å¼•å…¥æˆ–å®ç°æ‰§è¡Œå™¨ã€‚</p><p>ES7æä¾›çš„Async/Awaitè¯­æ³•ç³–ï¼Œåˆ™è¿›ä¸€æ­¥å°è£…äº†æ•´ä¸ªæµç¨‹ï¼Œç›¸æ¯”è¾ƒGeneratorå®ç°ï¼Œæ— éœ€å®ç°æ‰§è¡Œå™¨ï¼Œtaskå‡½æ•°å¯ç›´æ¥æ‰§è¡Œï¼Œä½¿ä»£ç ä¹¦å†™æ›´ä¼˜é›…ï¼Œå¯è¯»æ€§æ›´å¥½ã€‚</p><p>æ‰€ä»¥ï¼Œåœ¨å®é™…å¼€å‘ä¸­ï¼Œå¦‚æœæ— éœ€è´Ÿè´£æµç¨‹æ§åˆ¶çš„å¼‚æ­¥æ“ä½œæˆ–è€…éœ€è¦æä¾›ç»™å¤–éƒ¨ä½¿ç”¨çš„Apiå»ºè®®ç›´æ¥ä½¿ç”¨å›è°ƒå‡½æ•°çš„æ–¹å¼è¿›è¡Œå°è£…ã€‚è‹¥éœ€è¦å¯¹å¼‚æ­¥æµç¨‹è¿›è¡Œè¿‡æ§åˆ¶ï¼Œåˆ™å°†å¼‚æ­¥æ“ä½œå°è£…æˆPromiseå¯¹è±¡ï¼Œç”¨Async/Awaitçš„æ–¹å¼è¿›è¡Œæ§åˆ¶</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;JavaScriptï¼ˆä»¥ä¸‹ç®€ç§°jsï¼‰çš„è¯­è¨€æ‰§è¡Œç¯å¢ƒæ˜¯å•çº¿ç¨‹ï¼ˆsingle threadï¼‰çš„ï¼Œè¿™æ˜¯å…¶ç”¨é€”è€Œå†³å®šçš„ï¼Œä½œä¸ºæµè§ˆå™¨è„šæœ¬è¯­è¨€ï¼Œjsçš„ä¸»è¦ç”¨é€”æ˜¯ä¸ç”¨æˆ·äº’åŠ¨ï¼Œä»¥åŠæ“ä½œDOMï¼Œåœ¨iOSå¼€å‘ä¸Šçš„ç†è§£å°±æ˜¯æ“ä½œUIï¼ˆåªæœ‰ä¸»çº¿ç¨‹æ‰èƒ½å¯¹UIè¿›è¡Œæ“ä½œï¼‰ã€‚æ‰€ä»¥ä¸ºäº†é¿å…è¯­è¨€çš„å¤æ‚æ€§ï¼Œå•çº¿ç¨‹
      
    
    </summary>
    
    
      <category term="Web" scheme="http://yoursite.com/tags/Web/"/>
    
      <category term="Node" scheme="http://yoursite.com/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>Nodeç¯å¢ƒæ­å»º</title>
    <link href="http://yoursite.com/2018/08/13/Node%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
    <id>http://yoursite.com/2018/08/13/Nodeç¯å¢ƒæ­å»º/</id>
    <published>2018-08-13T01:50:58.000Z</published>
    <updated>2018-08-13T06:42:51.113Z</updated>
    
    <content type="html"><![CDATA[<p>ç”±äºNode.jsç‰ˆæœ¬æ›´æ–°å¿«ï¼Œç‰ˆæœ¬å·®å¼‚æ€§å¤§ï¼Œæ¨èä½¿ç”¨3mæ¥ç®¡ç†é…ç½®ç¯å¢ƒï¼š</p><ul><li>nvm(Node.js Version Manager)ï¼šè§£å†³å¤šç‰ˆæœ¬å…±å­˜ã€åˆ‡æ¢é—®é¢˜</li><li>npm(Node.js Package Manager)ï¼šè§£å†³Node.jsæ¨¡å—å®‰è£…é—®é¢˜ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ªNode.jsæ¨¡å—</li><li>nrm(Node.js Registry Manager)ï¼šè§£å†³npmé•œåƒè®¿é—®æ…¢çš„é—®é¢˜ï¼Œæä¾›æµ‹é€Ÿã€åˆ‡æ¢registryåŠŸèƒ½</li></ul><h2 id="NVM"><a href="#NVM" class="headerlink" title="NVM"></a>NVM</h2><h3 id="nvmå®‰è£…å‘½ä»¤"><a href="#nvmå®‰è£…å‘½ä»¤" class="headerlink" title="nvmå®‰è£…å‘½ä»¤"></a>nvmå®‰è£…å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.29.0/install.sh | bash</span><br></pre></td></tr></table></figure><p>é€šè¿‡curlä¸‹è½½install.shè„šæœ¬å¹¶æ‰§è¡Œï¼Œå¾…æ‰§è¡Œå®Œæˆåï¼Œå®ƒä¼šæŠŠnvmå‘½ä»¤çš„æ‰§è¡Œè·¯å¾„æ”¾åˆ°~/.bashrcæ–‡ä»¶é‡Œï¼Œé€šè¿‡æ‰§è¡Œsourceå‘½ä»¤ï¼Œä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure><h3 id="nvmçš„å¸¸ç”¨å‘½ä»¤"><a href="#nvmçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="nvmçš„å¸¸ç”¨å‘½ä»¤"></a>nvmçš„å¸¸ç”¨å‘½ä»¤</h3><ul><li>å®‰è£…ï¼š<code>$ nvm install 4.4.5</code></li><li>è®¾ç½®é»˜è®¤ï¼š<code>$ nvm alias default 4.4.5</code></li><li>åˆ‡æ¢ç‰ˆæœ¬ï¼š<code>$ nvm use 6</code></li><li>åˆ—å‡ºå½“å‰æœ¬åœ°ç‰ˆæœ¬ï¼š<code>$ nvm ls</code></li><li>åˆ—å‡ºè¿œç«¯å¯å®‰è£…ç‰ˆæœ¬ï¼š<code>$ nvm ls-remote</code></li></ul><p>å¯ä»¥è¯´è¿™5ä¸ªå‘½ä»¤åœ¨å¼€å‘è¿‡ç¨‹ä¸­è¶³å¤Ÿç”¨ï¼Œå…¶å®nvmè¿˜æœ‰å¾ˆå¤šé«˜çº§ç‰¹æ€§ï¼Œæ¯”å¦‚åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º.npmrcæŒ‡å®šç‰¹å®šçš„Node.jsç‰ˆæœ¬ï¼Œå®ƒå°±åˆ‡æ¢åˆ°å¯¹åº”ç‰ˆæœ¬ï¼Œç±»ä¼¼çš„å¾ˆå¤šï¼Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†</p><h2 id="NRM"><a href="#NRM" class="headerlink" title="NRM"></a>NRM</h2><p>ä»“åº“æºç®¡ç†å·¥å…·ï¼Œæºç±»ä¼¼äºpodsçš„repoç®¡ç†ã€‚<br>cnpmæºæ¯5åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ï¼Œå¦‚æœä¸Šä¼ äº†æ–°çš„packageä½¿ç”¨cnpmä¸èƒ½é©¬ä¸Šè·å–æ›´æ–°</p><h3 id="nrmå®‰è£…å‘½ä»¤"><a href="#nrmå®‰è£…å‘½ä»¤" class="headerlink" title="nrmå®‰è£…å‘½ä»¤"></a>nrmå®‰è£…å‘½ä»¤</h3><p>nrmæ˜¯Node.jsçš„æ¨¡å—ï¼Œå¯ç›´æ¥ä½¿ç”¨npmæ¥å®‰è£…</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install --global nrm</span><br></pre></td></tr></table></figure><h3 id="nrmçš„å¸¸ç”¨å‘½ä»¤"><a href="#nrmçš„å¸¸ç”¨å‘½ä»¤" class="headerlink" title="nrmçš„å¸¸ç”¨å‘½ä»¤"></a>nrmçš„å¸¸ç”¨å‘½ä»¤</h3><ul><li>æµ‹é€Ÿï¼š<code>$ nrm test</code></li><li>æŸ¥çœ‹æºï¼š<code>$ nrm ls</code></li><li>åˆ‡æ¢æºï¼š<code>$ nrm use cnpm</code></li></ul><h2 id="NPM"><a href="#NPM" class="headerlink" title="NPM"></a>NPM</h2><p>å½“å®‰è£…å¥½Node.jsç¯å¢ƒåï¼Œå°±å·²ç»è‡ªå¸¦äº†npmç®¡ç†å·¥å…·</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç”±äºNode.jsç‰ˆæœ¬æ›´æ–°å¿«ï¼Œç‰ˆæœ¬å·®å¼‚æ€§å¤§ï¼Œæ¨èä½¿ç”¨3mæ¥ç®¡ç†é…ç½®ç¯å¢ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;nvm(Node.js Version Manager)ï¼šè§£å†³å¤šç‰ˆæœ¬å…±å­˜ã€åˆ‡æ¢é—®é¢˜&lt;/li&gt;
&lt;li&gt;npm(Node.js Package Manager)ï¼šè§£å†³Node.
      
    
    </summary>
    
    
      <category term="Web" scheme="http://yoursite.com/tags/Web/"/>
    
      <category term="Node" scheme="http://yoursite.com/tags/Node/"/>
    
  </entry>
  
  <entry>
    <title>iOSæ¶æ„è¡¥å®Œè®¡åˆ’</title>
    <link href="http://yoursite.com/2018/08/12/iOS%E6%9E%B6%E6%9E%84%E8%A1%A5%E5%AE%8C%E8%AE%A1%E5%88%92/"/>
    <id>http://yoursite.com/2018/08/12/iOSæ¶æ„è¡¥å®Œè®¡åˆ’/</id>
    <published>2018-08-12T12:12:28.000Z</published>
    <updated>2018-08-13T07:18:47.616Z</updated>
    
    <content type="html"><![CDATA[<p>ç§»åŠ¨ç«¯æ¶æ„ä¸Šçš„è®¾è®¡ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸‰ä¸ªè§’è‰²ï¼šæ•°æ®ç»“æ„ã€æ•°æ®æµç®¡ç†ã€æ•°æ®å±•ç¤ºã€‚</p><p>ä¸ç®¡æ˜¯MVCã€MVVMã€MVPã€VIPERæˆ–è€…ä»»ä½•æ–°çš„è®¾è®¡æ¨¡å¼ã€éƒ½è·³ä¸å‡ºè¿™ä¸‰ä¸ªè§’è‰²ã€‚æ— éæ˜¯æŠŠæ•°æ®ç®¡ç†è€…çš„å·¥ä½œè¿›è¡Œæ‹†åˆ†ã€å”¯ä¸€çš„ç•Œå®šæ ‡å‡†å°±æ˜¯æŠŠå·¥ä½œæ‹†åˆ†çš„ç²’åº¦å¤§å°ã€‚<br>è€Œæ— è®ºå“ªç§æ€æƒ³ã€æœ€ç»ˆéƒ½é€ƒä¸å¼€ä¸‰ä¸ªé—®é¢˜çš„ã€Šã€Šå–èˆã€‹ã€‹ã€‚ä»£ç é‡ã€é€šç”¨æ€§ã€å¯è¯»æ€§ã€‚</p><h2 id="MVC"><a href="#MVC" class="headerlink" title="MVC"></a>MVC</h2><p>MVCå°±æ˜¯å…¸å‹çš„ç€é‡é€šç”¨å‹ä¸å¯è¯»æ€§ã€è¿™æ­£æ˜¯ä¸€ä¸ªä½œä¸ºä¸‡ç‰©ä¹‹åˆçš„æ¶æ„æ‰€éœ€è¦ä¿è¯çš„äº‹ã€‚ç®€å•ã€æ˜“å­¦ã€‚</p><h3 id="æ¶æ„æ¨¡å‹"><a href="#æ¶æ„æ¨¡å‹" class="headerlink" title="æ¶æ„æ¨¡å‹"></a>æ¶æ„æ¨¡å‹</h3><ul><li>Modelï¼šæ•°æ®ç»“æ„ï¼Œæ•°æ®æ˜ å°„</li><li>Viewï¼šæ•°æ®å±•ç¤º</li><li>Controllerï¼šè´Ÿè´£æ ¹æ®éœ€æ±‚å¯¹ModelåŠViewé—´çš„æ•°æ®æµè°ƒé…</li></ul><h3 id="Controllerçš„ç˜¦èº«"><a href="#Controllerçš„ç˜¦èº«" class="headerlink" title="Controllerçš„ç˜¦èº«"></a>Controllerçš„ç˜¦èº«</h3><p>ä¸è¿‡å’Œå¹¿ä¹‰çš„MVCä¸åŒï¼ŒiOSç«¯ç”±äºUIViewControllerè‡ªå¸¦ä¸€ä¸ªå®¹å™¨Viewã€‚æ‰€ä»¥é™¤äº†ä¸Šè¿°çš„æ­£ç»Ÿä»»åŠ¡ä¹‹å¤–ï¼ŒControllerè¿˜éœ€è¦æ‰¿æ‹…Viewçš„ç”Ÿæˆï¼Œå¸ƒå±€ç­‰çš„ä»»åŠ¡ã€‚Controllerå®é™…ä¸Šæ˜¯Controller+Viewçš„ä¸€ä¸ªè§’è‰²ï¼Œè¿™æ ·çš„è®¾å®šä¹Ÿå¯¼è‡´äº†Cå±‚è¿‡äºè‡ƒè‚¿çš„é—®é¢˜</p><ul><li><p>èƒ–Model</p><p>  ä¸»æ—¨æ˜¯Controllerä»Modelé‡Œæ‹¿åˆ°çš„æ•°æ®ã€ä¸éœ€è¦è¿›è¡Œæ›´å¤šçš„åˆ¤æ–­ã€å¤„ç†ç­‰æ“ä½œã€å°±èƒ½ä½¿ç”¨ã€‚ç¼ºç‚¹æ˜¯ç§»æ¤å›°éš¾ã€å¤ç”¨å›°éš¾</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Json Data:</span><br><span class="line">timestamp:1234567</span><br><span class="line"></span><br><span class="line">FatModel:</span><br><span class="line">@property (nonatomic, assign) CGFloat timestamp;</span><br><span class="line">- (NSString *)ymdDateString; // 2015-04-20 15:16</span><br><span class="line">- (NSString *)standardString; // 3åˆ†é’Ÿå‰ã€1å°æ—¶å‰ã€ä¸€å¤©å‰</span><br><span class="line"></span><br><span class="line">Controller:</span><br><span class="line">self.dateLabel.text = [FatModelIns ymdDateString];</span><br><span class="line">self.gapLabel.text = [FatModelIns standardString];</span><br></pre></td></tr></table></figure></li><li><p>ç˜¦Model</p><p>  å°±æ˜¯è¦æŠŠMVCçš„Mè´¯å½»å€’åº•ã€é™¤äº†ä¸šåŠ¡çš„è¡¨è¾¾å•¥éƒ½ä¸ç®¡ã€‚æ‰€ä»¥ç˜¦Modelè¦å€ŸåŠ©ä¸€äº›å¤–æ¥çš„è¾…åŠ©æ¨¡å—ï¼ˆç´¢æ€§å¯ä»¥å«Helperã€Utilï¼‰æ¥å¯¹å¼±ä¸šåŠ¡åšæŠ½è±¡ã€‚</p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Json Data:</span><br><span class="line">&#123;</span><br><span class="line">   &quot;name&quot;:&quot;casa&quot;,</span><br><span class="line">   &quot;sex&quot;:&quot;male&quot;,</span><br><span class="line">&#125;</span><br><span class="line">SlimModel:</span><br><span class="line">   @property (nonatomic, strong) NSString *name;</span><br><span class="line">   @property (nonatomic, strong) NSString *sex;</span><br><span class="line">Util:</span><br><span class="line">   #define Male 1;</span><br><span class="line">   #define Female 0;</span><br><span class="line">   + (BOOL)sexWithString:(NSString *)sex;</span><br><span class="line">Controller:</span><br><span class="line">   if ([Helper sexWithString:SlimModel.sex] == Male) &#123;</span><br><span class="line">       ...</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure></li></ul><p>æ€»ç»“ï¼šè™½ç„¶èƒ–ç˜¦Modeléƒ½ä¸€å®šç¨‹åº¦ä¸Šå°è¯•è§£å†³Controllerè¿‡äºè‡ƒè‚¿çš„é—®é¢˜ï¼Œä½†æ˜¯ä»…ä»…åœç•™åœ¨æ•°æ®å¤„ç†ã€æ ¼å¼åŒ–å±‚é¢ï¼ŒçœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ã€äº¤äº’é€»è¾‘ä¾ç„¶å­˜æ”¾äºControllerä¸­</p><h2 id="MVP"><a href="#MVP" class="headerlink" title="MVP"></a>MVP</h2><p>æœ¬è´¨ä¸Šä¸MVVMæ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯å°†Controllerä¸­å…³äºModelå’Œæ•°æ®å¤„ç†çš„ä»£ç ç§»æ¤åˆ°Presenterä¸­ï¼Œä½†æ˜¯MVPå¹¶ä¸æ˜¯ä¸€ä¸ªå®Œå…¨å‰¥ç¦»ä¸šåŠ¡é€»è¾‘çš„è®¾è®¡æ¨¡å¼</p><h3 id="æ¶æ„æ¨¡å‹-1"><a href="#æ¶æ„æ¨¡å‹-1" class="headerlink" title="æ¶æ„æ¨¡å‹"></a>æ¶æ„æ¨¡å‹</h3><ul><li><p>View</p><p>  è´Ÿè´£ç•Œé¢ç»“æ„å’Œå¸ƒå±€ç®¡ç†ï¼Œé€šè¿‡Presenteræš´éœ²çš„æ•°æ®æ›´æ–°å’Œæ•°æ®è·å–çš„æ¥å£è¿›è¡Œå±•ç¤º</p></li><li><p>Presenter</p><p>  è´Ÿè´£å¤„ç†æ•°æ®ï¼Œå¹¶æä¾›åˆ·æ–°åé¦ˆæ¥å£ï¼Œå¹¶ç®¡ç†Modelã€‚</p></li><li><p>Model</p><p>  å’ŒMVCä¸­çš„ä¸€æ ·ï¼Œæä¾›æ•°æ®æ¨¡å‹å’Œæ˜ å°„</p></li></ul><p><img src="/2018/08/12/iOSæ¶æ„è¡¥å®Œè®¡åˆ’/mvp.jpg" alt=""></p><h2 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h2><p>MVVMèµ·æºäºå‰ç«¯ï¼Œè¿™ç§æŠ½ç¦»æ¨¡å‹å“åº”å¼æ¶æ„åœ¨Webå¼€å‘åŠå°ç¨‹åºå¼€å‘ä¸­å·²ç»ååˆ†æ™®åŠï¼Œåœ¨å¤§å‚ç”šè‡³æˆä¸ºä¸€ç§æ ‡å‡†å­˜åœ¨ã€‚MVVMçš„å‡ºç°ï¼Œä¸ºç§»åŠ¨ç«¯å¼€å‘Controller/Activityçš„ç˜¦èº«å¸¦æ¥å¯å‘ï¼Œåˆšæ‰è®²åˆ°çš„èƒ–Modelåªä»Controllerä¸­ç§»æ¤äº†ä¸€äº›ç®€å•çš„å¼±ä¸šåŠ¡ï¼Œè€Œå¤§é‡çš„äº¤äº’é€»è¾‘ä»å­˜æ”¾åœ¨Controllerä¸­</p><h3 id="MVVMåŠ›æ±‚è§£å†³çš„å¼€å‘ç—›ç‚¹"><a href="#MVVMåŠ›æ±‚è§£å†³çš„å¼€å‘ç—›ç‚¹" class="headerlink" title="MVVMåŠ›æ±‚è§£å†³çš„å¼€å‘ç—›ç‚¹"></a>MVVMåŠ›æ±‚è§£å†³çš„å¼€å‘ç—›ç‚¹</h3><ul><li>è¿‡é•¿çš„æ•°æ®å“åº”é“¾ï¼Œæ¯æ¬¡æ•°æ®æ›´æ–°éƒ½è¦å‘ä¸Šå±‚ä¼ é€’</li><li>æ§åˆ¶å™¨å±‚ä»£ç è‡ƒè‚¿ã€‚ç”±äºUIKitæ¡†æ¶çš„è®¾è®¡åŸå› ï¼ŒUIViewControlleræ‰¿æ‹…äº†è¿‡å¤šä¸åº”æ‰¿æ‹…çš„è´£ä»»ï¼ŒControllerå†…åŒ…å«äº†æ•°æ®ã€ç•Œé¢ã€é€»è¾‘å…ƒç´ ï¼Œåªèƒ½é€šè¿‡è§„èŒƒçº¦æŸï¼Œéš¾ä»¥ç®¡ç†</li><li>æ¶æ„å±‚é¢ç»“æ„åˆ’åˆ†ä¸æ¸…æ™°ï¼Œå¢åŠ äº†ç§»åŠ¨ç«¯çš„å­¦ä¹ éš¾åº¦</li></ul><h3 id="æ¶æ„æ¨¡å‹-2"><a href="#æ¶æ„æ¨¡å‹-2" class="headerlink" title="æ¶æ„æ¨¡å‹"></a>æ¶æ„æ¨¡å‹</h3><ul><li><p>Model</p><p>  å’ŒMVCä¸­çš„ç˜¦Modelä¸€æ ·ã€‚åªæ‰¿è½½æœ€åŸºæœ¬çš„æ•°æ®å•å…ƒå’Œæ•°æ®æ˜ å°„ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UserModel</span>: <span class="title">NSObject</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *userName;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">copy</span>) <span class="built_in">NSString</span> *sex;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure></li><li><p>View</p><p>  Viewå±‚åŒ…å«äº†UIKitæ¡†æ¶ä¸‹ï¼ŒUIViewå’ŒUIViewControlleråŠå…¶å­ç±»ã€‚åœ¨Viewå±‚ä¸­åªéœ€è¦ç¼–å†™é¡µé¢å±•ç¤ºæ¨¡æ¿å’Œæ•°æ®ç»‘å®šï¼Œä¸å†™ä»»ä½•ä¸šåŠ¡é€»è¾‘ã€‚</p>  <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)awakeFromNib &#123;</span><br><span class="line">   [<span class="keyword">super</span> awakeFromNib];</span><br><span class="line">   RAC(<span class="keyword">self</span>.userNameLabel, text) = RACObserve(<span class="keyword">self</span>, viewModel.userName);</span><br><span class="line">   RAC(<span class="keyword">self</span>.userSexLabel, text) = RACObserve(<span class="keyword">self</span>, viewModel.sex);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>ViewModel</p><p>  ViewModelé‡Œæ¶µç›–äº†æ‰€æœ‰Viewå±‚ç»‘å®šéœ€è¦çš„æ•°æ®æ¨¡å‹ã€é€»è¾‘å‡½æ•°ã€äº‹ä»¶å“åº”å‡½æ•°ã€‚å½“æ•°æ®å‘ç”Ÿæ”¹å˜ï¼ŒViewå±‚ä¼šå“åº”å¼æ¸²æŸ“æ›´æ–°ç•Œé¢ã€‚</p></li></ul><h3 id="RACå¯¹äºMVVMçš„æ„ä¹‰"><a href="#RACå¯¹äºMVVMçš„æ„ä¹‰" class="headerlink" title="RACå¯¹äºMVVMçš„æ„ä¹‰"></a>RACå¯¹äºMVVMçš„æ„ä¹‰</h3><p>RAC(ReactiveCocoa)å¹¶ä¸æ˜¯MVVMæ€æƒ³çš„æ ¸å¿ƒï¼Œä¸ç”¨RACä¹Ÿèƒ½ä½¿ç”¨MVVMã€‚ä½†æ˜¯ä½¿ç”¨RACèƒ½æ›´å¥½çš„ä½“ç°MVVMçš„ç²¾é«“ï¼Œå³æ•°æ®ç»‘å®šå¤„ç†ã€å“åº”å¼æ¸²æŸ“ã€‚å°±åƒWebå¼€å‘ä¸­ï¼Œä½¿ç”¨Reactã€Vueé‚£æ ·ã€‚åœ¨MVCä¸­ï¼ŒMå’ŒVè‹¥æ— æŒæœ‰å…³ç³»ï¼Œåœ¨æ•°æ®ä¼ é€’å’Œæ¸²æŸ“æ—¶ä¼šé€ æˆå¾ˆå¤šéº»çƒ¦ï¼Œé‚£ä¹ˆå¦‚ä½•æŠŠåŸæœ¬æ¾æ•£çš„ä¸¤è€…é€šè¿‡ä¸­é—´å±‚è”ç³»èµ·æ¥ï¼ˆæ•°æ®ç»‘å®šï¼‰ï¼Œåœ¨iOSæœ¬èº«å¹¶æ²¡æœ‰å¤ªé è°±çš„åŠæ³•ï¼Œåœ¨Vueä¸­æœ‰<code></code>è¿™ç§ä¼˜é›…çš„å†™æ³•ã€‚</p><p>è™½ç„¶KVOã€Notificationã€blockã€delegateå’Œtarget-actionéƒ½å¯ä»¥ç”¨æ¥åšæ•°æ®é€šä¿¡è¿›è€Œå®ç°ç»‘å®šï¼Œä½†éƒ½ä¸å¦‚RACæ¥çš„ã€Šã€Šä¼˜é›…ã€‹ã€‹ã€‚</p><h2 id="å…³äºæ¶æ„è®¾è®¡çš„ä¸€äº›è§‚ç‚¹"><a href="#å…³äºæ¶æ„è®¾è®¡çš„ä¸€äº›è§‚ç‚¹" class="headerlink" title="å…³äºæ¶æ„è®¾è®¡çš„ä¸€äº›è§‚ç‚¹"></a>å…³äºæ¶æ„è®¾è®¡çš„ä¸€äº›è§‚ç‚¹</h2><ul><li><p>æ§åˆ¶å¥½Controllerçš„ä»£ç é‡</p><p>  éšç€é¡¹ç›®çš„è¿›è¡Œã€ä»£ç é‡æœ€å¤šåªèƒ½ä¼˜åŒ–ã€è†¨èƒ€ä¸å¯é¿å…ã€‚è€Œåœ¨æ²¡åŠæ³•ç»§ç»­ç²¾ç®€çš„å‰æä¸‹ã€æƒ³æ§åˆ¶Controllerçš„ä»£ç é‡ã€‚å°±è¦åœ¨å¯è¯»æ€§å’Œé€šç”¨æ€§ä¹‹é—´è¿›è¡Œå–èˆã€‚è¯¥æŒªèµ°çš„æ—¶å€™å°±æŒªèµ°å§ã€æ¯•ç«Ÿæ¢³ç†ä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ã€æ¯”æ¢³ç†ä¸€ä¸ªå‡ åƒè¡Œçš„Controllerè¦æ–¹ä¾¿å¤šäº†ã€‚</p></li><li><p>å¯¹äºMVXå¦‚ä½•é€‰æ‹©</p><ul><li>å…¶å®å®Œå…¨è¦çœ‹ä¸šåŠ¡æ€§è´¨ä»¥åŠé¡¹ç›®å¤æ‚åº¦</li><li>å¦‚æœä½ ä¸€ä¸ªé¡µé¢åªæœ‰ä¸€ä¸ªUITableViewï¼Œæå‡ºä¸€äº›å¥‡æ·«æŠ€å·§å…¶å®æ„ä¹‰ä¸å¤§ï¼Œå¾’å¢çƒ¦æ¼ã€‚è¸è¸å®å®ç”¨MVCå¯¹å¤§å®¶éƒ½å¥½ã€‚</li><li>å¦‚æœä¸šåŠ¡ä¸­Viewå­˜åœ¨å¤šç§æ ·å¼é£æ ¼ï¼Œåº•å±‚æ•°æ®å¤„ç†å­˜åœ¨å¤§é‡å¤ç”¨çš„æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨MVP</li><li>å¦‚æœä¸šåŠ¡ç›¸å½“çš„å¤æ‚ï¼Œè€¦åˆè®©äººæµ‘èº«éš¾å—ã€‚åšå¥½æ¨¡å—åŒ–æˆ–è€…å¹²è„†VIPERæ‰æ˜¯å‡ºè·¯ã€‚</li><li>å¦‚æœä½ è¿½æ±‚å¦‚å‰ç«¯MVVMæ¡†æ¶ï¼ˆVueã€Reactï¼‰ä¸€èˆ¬çš„å¼€å‘ä½“éªŒï¼Œå¯ä»¥å°è¯•ä½¿ç”¨RACï¼Œä½†ä¸å»ºè®®å•ç‹¬è„±ç¦»RACä½¿ç”¨MVVMæ¶æ„</li></ul></li><li><p>æ— è®ºç”¨å“ªç§æ¨¡å¼ã€éƒ½è¦æ·±åˆ»çš„ç†è§£æ¯ä¸ªæ¨¡å—ä¸åŒçš„èŒè´£</p></li></ul><p>ps: æœ¬æ–‡åŸºäºCocoaChinaåšä¸»kirito_songçš„æ–‡ç« ï¼Œå¹¶æ•´ç†äº†è¿‘æœŸé¡¹ç›®å®è·µæ’°å†™ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç§»åŠ¨ç«¯æ¶æ„ä¸Šçš„è®¾è®¡ï¼Œæœ¬è´¨ä¸Šéƒ½æ˜¯ä¸‰ä¸ªè§’è‰²ï¼šæ•°æ®ç»“æ„ã€æ•°æ®æµç®¡ç†ã€æ•°æ®å±•ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ä¸ç®¡æ˜¯MVCã€MVVMã€MVPã€VIPERæˆ–è€…ä»»ä½•æ–°çš„è®¾è®¡æ¨¡å¼ã€éƒ½è·³ä¸å‡ºè¿™ä¸‰ä¸ªè§’è‰²ã€‚æ— éæ˜¯æŠŠæ•°æ®ç®¡ç†è€…çš„å·¥ä½œè¿›è¡Œæ‹†åˆ†ã€å”¯ä¸€çš„ç•Œå®šæ ‡å‡†å°±æ˜¯æŠŠå·¥ä½œæ‹†åˆ†çš„ç²’åº¦å¤§å°ã€‚&lt;br&gt;è€Œæ— è®ºå“ªç§æ€æƒ³ã€æœ€ç»ˆ
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>å®ç°è™¾ç±³éŸ³ä¹é¦–é¡µè§†å·®æ»šåŠ¨ç‰¹æ•ˆ</title>
    <link href="http://yoursite.com/2018/07/20/%E5%AE%9E%E7%8E%B0%E8%99%BE%E7%B1%B3%E9%9F%B3%E4%B9%90%E9%A6%96%E9%A1%B5%E8%A7%86%E5%B7%AE%E6%BB%9A%E5%8A%A8%E7%89%B9%E6%95%88/"/>
    <id>http://yoursite.com/2018/07/20/å®ç°è™¾ç±³éŸ³ä¹é¦–é¡µè§†å·®æ»šåŠ¨ç‰¹æ•ˆ/</id>
    <published>2018-07-20T11:30:28.000Z</published>
    <updated>2018-08-13T07:17:21.293Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘é¡¹ç›®è¿­ä»£äº†ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œç”±äºæˆ‘ä»¬çš„è®¾è®¡å¸ˆæ˜¯è™¾ç±³éŸ³ä¹çš„å¿ å®ç²‰ä¸ï¼Œé¦–é¡µå€Ÿé‰´äº†è™¾ç±³8.0é¦–é¡µçš„è§†å·®åŠ¨ç”»ï¼Œåœ¨é¢„ç ”å®ç°è¿‡ç¨‹ä¸­æœ‰ä¸€äº›å€¼å¾—è®°å½•å’Œåˆ†äº«çš„åœ°æ–¹</p><h2 id="è™¾ç±³éŸ³ä¹8-0é¦–é¡µé‰´èµ"><a href="#è™¾ç±³éŸ³ä¹8-0é¦–é¡µé‰´èµ" class="headerlink" title="è™¾ç±³éŸ³ä¹8.0é¦–é¡µé‰´èµ"></a>è™¾ç±³éŸ³ä¹8.0é¦–é¡µé‰´èµ</h2><p>å…ˆçœ‹çœ‹è™¾ç±³é¦–é¡µæœ€ç»ˆçš„å±•ç¤ºæ•ˆæœï¼Œæœç´¢æ ä¼šéšç€å†…å®¹è§†å›¾æ»šåŠ¨åç§»æ¸éšï¼Œå†…å®¹è§†å›¾æœ‰ä¸€ä¸ªè§†å·®æ»šåŠ¨çš„æ•ˆæœï¼Œè¾¾åˆ°æ»šåŠ¨é˜ˆå€¼åæœç´¢æ ä¼šéšè—ã€‚</p><p>ç»†å¿ƒçš„åŒå­¦å¯èƒ½ä¼šå‘ç°ï¼ŒBannerä¸å¯¼èˆªæ æ»šåŠ¨çš„é€Ÿåº¦ç›¸åŒï¼Œæ‰€ä»¥å®ç°çš„éš¾ç‚¹ï¼Œæ˜¯å¦‚ä½•å®ç°Bannerå›¾ä¸å¯¼èˆªæ çš„ç›¸å¯¹é™æ­¢ï¼ŒåŒæ—¶åœ¨è¡¨è§†å›¾æ»šåŠ¨åˆ°æ—¢å®šåç§»é‡æ—¶ï¼ŒBannerå›¾è¢«è¡¨è§†å›¾é®ç›–çš„æ•ˆæœã€‚</p><p><img src="/2018/07/20/å®ç°è™¾ç±³éŸ³ä¹é¦–é¡µè§†å·®æ»šåŠ¨ç‰¹æ•ˆ/xiamiHomePage.gif" alt=""></p><h2 id="é¡µé¢ç»“æ„åˆ†æ"><a href="#é¡µé¢ç»“æ„åˆ†æ" class="headerlink" title="é¡µé¢ç»“æ„åˆ†æ"></a>é¡µé¢ç»“æ„åˆ†æ</h2><p>ä»å‘ˆç°ç»“æœæ¥çœ‹ï¼Œæ•´ä¸ªè§†å›¾å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œå¯¼èˆªè§†å›¾ï¼ˆCusNavigationViewï¼‰åŠå†…å®¹è§†å›¾ï¼ˆMainContentViewï¼‰ã€‚</p><p>å¯¼èˆªè§†å›¾åŒæ—¶åŒ…å«äº†ä¸€ä¸ªè‡ªå®šä¹‰æœç´¢æ ï¼ˆSearchBarï¼‰ï¼Œè‡ªå®šä¹‰äºŒçº§å¯¼èˆªæ ï¼ˆNavigationBarLevel2ï¼‰ï¼Œè¿™ä¸ªäºŒçº§å¯¼èˆªæ çš„å®ç°æˆ‘ä¼šå•ç‹¬å†™ä¸€ç¯‡åšå®¢æ¥è®²ã€‚</p><p>å†…å®¹è§†å›¾æ˜¯ä¸€ä¸ªè¡¨è§†å›¾ï¼ˆTableViewï¼‰ï¼Œä»¥åŠä½¿ç”¨è¡¨è§†å›¾çš„å¤´è§†å›¾æ¥æ·»åŠ è½®æ’­å›¾ï¼ˆBannerViewï¼‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">â” CusNavigationView</span><br><span class="line">â”ƒâ”£ SearchBar</span><br><span class="line">â”ƒâ”— NavigationBarLevel2</span><br><span class="line">â”— MainContentView</span><br><span class="line">â”£ BannerView</span><br><span class="line">â”— TableView</span><br></pre></td></tr></table></figure><p>æ­¤å¤„å¯¼èˆªè§†å›¾ä¸ºäº†æ›´å¥½ç›‘å¬MainContentViewçš„æ»šåŠ¨åç§»å¯¹å­è§†å›¾è¿›è¡Œæ§åˆ¶ï¼Œæ²¡æœ‰ä½¿ç”¨ç³»ç»Ÿçš„NavigationBarï¼Œè€Œé‡‡ç”¨äº†è‡ªå®šä¹‰çš„æ–¹å¼ã€‚</p><h2 id="è®©æˆ‘ä»¬å®ç°å¥¹ï¼"><a href="#è®©æˆ‘ä»¬å®ç°å¥¹ï¼" class="headerlink" title="è®©æˆ‘ä»¬å®ç°å¥¹ï¼"></a>è®©æˆ‘ä»¬å®ç°å¥¹ï¼</h2><p>åœ¨å¼€å§‹ç¼–å†™é€»è¾‘å‰ï¼Œå…ˆæ ¹æ®ä¸Šä¸ªSectionåˆ†æçš„è§†å›¾ç»“æ„ï¼Œå£°æ˜ç›¸å…³è§†å›¾å±æ€§åŠå¯¼èˆªæ æŠ˜å å‰é«˜åº¦ä¸æŠ˜å åé«˜åº¦</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#define ZMC_Fold_Height 44//æŠ˜å åé«˜åº¦</span></span><br><span class="line"><span class="meta">#define ZMC_Unfold_Height 94 //æŠ˜å å‰é«˜åº¦</span></span><br><span class="line"><span class="meta">#define ZMC_Fold_Height_Offset (ZMC_Unfold_Height - ZMC_Fold_Height)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//Navi</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *cusNavigationView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *searchBarView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *segmentBarView;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Table</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UITableView</span> *contentTableView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">UIView</span> *bannerView;</span><br></pre></td></tr></table></figure><p>é¦–å…ˆå…ˆå®ç°è§†å·®æ»šåŠ¨æ•ˆæœï¼Œæˆ‘ä»¬é€šè¿‡å®ç°ScrollViewä»£ç†ï¼Œç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œé€šè¿‡è®¡ç®—æŠ˜å åŠ¨ç”»å†…æ»šåŠ¨è¿›åº¦æ¯”çš„æ–¹å¼ï¼Œæ§åˆ¶å„ä¸ªè§†å›¾çš„ç›¸å…³å±æ€§ï¼Œè¾¾åˆ°è§†å·®æ•ˆæœï¼Œä»£ç å¦‚ä¸‹</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)scrollViewDidScroll:(<span class="built_in">UIScrollView</span> *)scrollView&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">CGFloat</span> offsetY = <span class="keyword">self</span>.contentTableView.contentOffset.y + ZMC_Fold_Height_Offset;</span><br><span class="line">    <span class="built_in">CGFloat</span> ratio = offsetY / ZMC_Fold_Height_Offset;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¦‚æœæœ‰bannerå¤´è§†å›¾</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span>.contentTableView.tableHeaderView isEqual:<span class="keyword">self</span>.bannerView]) &#123;</span><br><span class="line">        <span class="comment">//è¡¨æ ¼è§†å›¾éœ€è¦ç§»åŠ¨banner.height + ZMC_Fold_Height_Offset</span></span><br><span class="line">        <span class="comment">//bannerå’Œnaviç›¸å¯¹é™æ­¢</span></span><br><span class="line">        <span class="comment">//ç§»åŠ¨æ¯”ä¸º ZMC_Fold_Height_Offset / banner.height + ZMC_Fold_Height_Offset</span></span><br><span class="line">        ratio = offsetY / (<span class="keyword">self</span>.bannerView.frame.size.height + ZMC_Fold_Height_Offset);</span><br><span class="line">        [_contentTableView sendSubviewToBack:<span class="keyword">self</span>.bannerView];</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ratio &gt; <span class="number">0</span> &amp;&amp; ratio &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.cusNavigationView mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.height.mas_equalTo(ZMC_Unfold_Height - ZMC_Fold_Height_Offset * ratio);</span><br><span class="line">        &#125;];</span><br><span class="line">        [<span class="keyword">self</span>.searchBarView setAlpha:<span class="number">1</span> - ratio];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ([<span class="keyword">self</span>.contentTableView.tableHeaderView isEqual:<span class="keyword">self</span>.bannerView]) &#123;</span><br><span class="line">            [_banner mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                make.top.mas_equalTo(ratio * <span class="keyword">self</span>.bannerView.frame.size.height + <span class="number">20</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ratio &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.cusNavigationView mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.height.mas_equalTo(ZMC_Unfold_Height);</span><br><span class="line">        &#125;];</span><br><span class="line">        [<span class="keyword">self</span>.searchBarView setAlpha:<span class="number">1</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ([<span class="keyword">self</span>.contentTableView.tableHeaderView isEqual:<span class="keyword">self</span>.bannerView]) &#123;</span><br><span class="line">            [_banner mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                make.top.mas_equalTo(<span class="number">20</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ratio &gt;= <span class="number">1</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span>.cusNavigationView mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">            make.height.mas_equalTo(ZMC_Fold_Height);</span><br><span class="line">        &#125;];</span><br><span class="line">        [<span class="keyword">self</span>.searchBarView setAlpha:<span class="number">0</span>];</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> ([<span class="keyword">self</span>.contentTableView.tableHeaderView isEqual:<span class="keyword">self</span>.bannerView]) &#123;</span><br><span class="line">            [_banner mas_updateConstraints:^(MASConstraintMaker *make) &#123;</span><br><span class="line">                make.top.mas_equalTo(<span class="keyword">self</span>.bannerView.frame.size.height + <span class="number">20</span>);</span><br><span class="line">            &#125;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…‰å®ç°äº†è§†å·®æ»šåŠ¨è¿˜ä¸å¤Ÿï¼Œå¦‚æœæ»šåŠ¨åˆ°ä¸€åŠä½ç½®ä¼šå‡ºç°åŠé®åŠæ©çš„æ•ˆæœï¼Œéå¸¸å½±å“ä½“éªŒï¼Œäºæ˜¯æˆ‘ä»¬æ–°å»ºä¸€ä¸ªåä¸º<code>magneticScrollView:</code>çš„æ–¹æ³•ï¼Œç”¨äºæ§åˆ¶åœ¨ç»“æŸæ»šåŠ¨æ—¶è¿›è¡Œè§†å›¾æ£€æŸ¥ï¼Œå¦‚æœè¿›åº¦æ¯”åœ¨0~1ä¹‹é—´ï¼Œåˆ™æ ¹æ®æ—¢å®šé˜ˆå€¼è°ƒæ•´è§†å›¾ä½ç½®ï¼Œè¾¾åˆ°å¼¹æ€§æ•ˆæœ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)magneticScrollView:(<span class="built_in">UIScrollView</span> *)sc&#123;</span><br><span class="line">    <span class="built_in">CGFloat</span> offsetY = <span class="keyword">self</span>.contentTableView.contentOffset.y + ZMC_Fold_Height_Offset;</span><br><span class="line">    <span class="built_in">CGFloat</span> ratio = offsetY / ZMC_Fold_Height_Offset;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//å¦‚æœæœ‰bannerå¤´è§†å›¾</span></span><br><span class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span>.contentTableView.tableHeaderView isEqual:<span class="keyword">self</span>.bannerView]) &#123;</span><br><span class="line">        <span class="comment">//è¡¨æ ¼è§†å›¾éœ€è¦ç§»åŠ¨banner.height + ZMC_Fold_Height_Offset</span></span><br><span class="line">        <span class="comment">//bannerå’Œnaviç›¸å¯¹é™æ­¢</span></span><br><span class="line">        <span class="comment">//ç§»åŠ¨æ¯”ä¸º ZMC_Fold_Height_Offset / banner.height + ZMC_Fold_Height_Offset</span></span><br><span class="line">        ratio = offsetY / (<span class="keyword">self</span>.bannerView.frame.size.height + ZMC_Fold_Height_Offset);</span><br><span class="line">        [_contentTableView sendSubviewToBack:<span class="keyword">self</span>.bannerView];</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (ratio &gt; <span class="number">1</span> || ratio &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ratio &lt;= <span class="number">0.5</span>) &#123;</span><br><span class="line">        [sc setContentOffset:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, -ZMC_Fold_Height_Offset) animated:<span class="literal">YES</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ratio &gt; <span class="number">0.5</span> &amp;&amp; ratio &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        [sc setContentOffset:<span class="built_in">CGPointMake</span>(<span class="number">0</span>, [<span class="keyword">self</span>.contentTableView.tableHeaderView isEqual:<span class="keyword">self</span>.bannerView] ? <span class="keyword">self</span>.bannerView.frame.size.height : <span class="number">0</span>) animated:<span class="literal">YES</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥æ–¹æ³•å¦‚æœåœ¨æ»šåŠ¨è§†å›¾å­˜åœ¨å‡é€Ÿçš„æƒ…å†µä¸‹ï¼Œåˆ™åœ¨å‡é€Ÿå®Œæˆåè°ƒç”¨ï¼Œè‹¥ä¸å­˜åœ¨å‡é€Ÿï¼Œåˆ™ç›´æ¥è°ƒç”¨</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)scrollViewDidEndDragging:(<span class="built_in">UIScrollView</span> *)scrollView willDecelerate:(<span class="built_in">BOOL</span>)decelerate&#123;</span><br><span class="line">    <span class="keyword">if</span> (!decelerate) &#123;</span><br><span class="line">        [<span class="keyword">self</span> magneticScrollView:scrollView];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)scrollViewDidEndDecelerating:(<span class="built_in">UIScrollView</span> *)scrollView&#123;</span><br><span class="line">    [<span class="keyword">self</span> magneticScrollView:scrollView];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é‚£ä¹ˆï¼Œè™¾ç±³8.0é¦–é¡µä¸€ä¸ªè§†å·®æ•ˆæœç®€å•çš„demoå°±å®Œæˆäº†ï¼Œæ ¸å¿ƒä»£ç çš„ä»£ç é‡ä¸åˆ°100è¡Œã€‚å½“ç„¶ï¼Œå®é™…çš„ä¸šåŠ¡éœ€æ±‚è‚¯å®šæ²¡æœ‰è¿™ä¹ˆç®€å•ï¼Œé‡è¦çš„æ˜¯ä¸€ç§å®ç°æ€è·¯ã€‚<a href="https://github.com/tianxueweii/XiamiParallaxScrollDemo" title="https://github.com/tianxueweii/XiamiParallaxScrollDemo" target="_blank" rel="noopener">ä»£ç ä¼ é€é—¨</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ€è¿‘é¡¹ç›®è¿­ä»£äº†ä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ï¼Œç”±äºæˆ‘ä»¬çš„è®¾è®¡å¸ˆæ˜¯è™¾ç±³éŸ³ä¹çš„å¿ å®ç²‰ä¸ï¼Œé¦–é¡µå€Ÿé‰´äº†è™¾ç±³8.0é¦–é¡µçš„è§†å·®åŠ¨ç”»ï¼Œåœ¨é¢„ç ”å®ç°è¿‡ç¨‹ä¸­æœ‰ä¸€äº›å€¼å¾—è®°å½•å’Œåˆ†äº«çš„åœ°æ–¹&lt;/p&gt;
&lt;h2 id=&quot;è™¾ç±³éŸ³ä¹8-0é¦–é¡µé‰´èµ&quot;&gt;&lt;a href=&quot;#è™¾ç±³éŸ³ä¹8-0é¦–é¡µé‰´èµ&quot; class=&quot;headerlin
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>UINavigationBarå®šåˆ¶çš„æ­£ç¡®å§¿åŠ¿</title>
    <link href="http://yoursite.com/2018/07/15/UINavigationBar%E5%AE%9A%E5%88%B6%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF/"/>
    <id>http://yoursite.com/2018/07/15/UINavigationBarå®šåˆ¶çš„æ­£ç¡®å§¿åŠ¿/</id>
    <published>2018-07-15T12:50:58.000Z</published>
    <updated>2018-08-13T07:19:14.240Z</updated>
    
    <content type="html"><![CDATA[<p>ç³»ç»Ÿå¯¼èˆªæ ï¼ˆUINavigationBarï¼‰çš„å®šåˆ¶ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œç‰¹åˆ«åœ¨iOS11ä»¥åå¯¼èˆªæ è§†å›¾ç»“æ„å‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¼è‡´ä¹‹å‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆéƒ½ä¸å†é€‚ç”¨ã€‚ç”±äºå¯¼èˆªæ å›¾å±‚ç‹¬ç«‹äºæ§åˆ¶å™¨è§†å›¾ï¼Œæ‰€ä»¥ä½ å¯ä»¥éšè—æ‰å¯¼èˆªæ ä½¿ç”¨è‡ªå·±ç»˜åˆ¶çš„å¯¼èˆªæ ä»…ä½¿ç”¨å¯¼èˆªæ§åˆ¶å™¨çš„è§†å›¾æ ˆï¼Œä½†æœ¬æ–‡ä¸æ¨èè¿™ç§æ–¹å¼ã€‚</p><p>æœ¬æ–‡é‡‡ç”¨çš„æ–¹å¼ä¾ç„¶åœ¨ç³»ç»Ÿå¯¼èˆªæ çš„åŸºç¡€ä¸Šè¿›è¡Œé…ç½®ã€‚è¿™ä¹ˆåšçš„å¥½å¤„æœ‰å¾ˆå¤šï¼Œé¦–å…ˆç³»ç»Ÿå¯¼èˆªæ è§†å›¾å±‚ç‹¬ç«‹äºæ§åˆ¶å™¨è§†å›¾ï¼Œæ§åˆ¶å™¨è§†å›¾åŠ è½½äºUINavigationTransitionViewï¼Œå¯¼èˆªæ çš„UINavigationBarä¸å®ƒæ˜¯å¹³çº§å…³ç³»ï¼Œå¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬æ˜¯å¤ç”¨å®ƒçš„ã€‚å…¶æ¬¡ä¸ç”¨å»è‡ªå·±ç®¡ç†å¤æ‚çš„è§†å›¾å±‚çº§å…³ç³»ä»¥åŠæ»šåŠ¨è§†å›¾çš„è°ƒæ•´è¡Œä¸ºã€‚</p><p>å¯¼èˆªæ§åˆ¶å™¨çš„å±‚çº§å…³ç³»ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UITransitionView</span><br><span class="line">â”— UILayoutContainerView</span><br><span class="line">â”£ UINavigationTransitionView (æ§åˆ¶å™¨è§†å›¾ç»˜åˆ¶åœ¨è¿™ä¸ªå±‚çº§)</span><br><span class="line">â”— UINavigationBar</span><br></pre></td></tr></table></figure><p>å¯¼èˆªæ çš„å®šåˆ¶åŒ–å¯åˆ†ä¸ºå¯¼èˆªæ æ¸²æŸ“é…ç½®ã€ä»¥åŠå¯¼èˆªæ æ§ä»¶é…ç½®ä¸¤ä¸ªéƒ¨åˆ†</p><h2 id="ä¸åŒç‰ˆæœ¬ç³»ç»Ÿå¯¼èˆªæ è§†å›¾ç»“æ„"><a href="#ä¸åŒç‰ˆæœ¬ç³»ç»Ÿå¯¼èˆªæ è§†å›¾ç»“æ„" class="headerlink" title="ä¸åŒç‰ˆæœ¬ç³»ç»Ÿå¯¼èˆªæ è§†å›¾ç»“æ„"></a>ä¸åŒç‰ˆæœ¬ç³»ç»Ÿå¯¼èˆªæ è§†å›¾ç»“æ„</h2><p>é¦–å…ˆæˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹iOS11å‰åå¯¼èˆªæ ï¼ˆUINavigationBarï¼‰çš„è§†å›¾ç»“æ„</p><p>iOS11ä»¥å‰:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">UINavigationBar</span><br><span class="line">â”£ _UINavigationBarBackground</span><br><span class="line">â”ƒâ”— UIImageView (é˜´å½±è§†å›¾)</span><br><span class="line">â”£ UILabel (è‡ªå®šä¹‰å¤´è§†å›¾ï¼Œå¯ä¸ºä»»æ„ç±»å‹)</span><br><span class="line">â”£ UINavigationItemView </span><br><span class="line">â”£ ...</span><br><span class="line">â”— _UINavigationBarBackIndicatorView</span><br></pre></td></tr></table></figure><p>iOS11:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">UINavigationBar</span><br><span class="line">â”£ _UIBarBackground</span><br><span class="line">â”ƒâ”£ UIImageView (èƒŒæ™¯è§†å›¾)</span><br><span class="line">â”ƒâ”— UIImageView (é˜´å½±è§†å›¾)</span><br><span class="line">â”— _UINavigationBarContentView</span><br><span class="line">â”£ UILabel (è‡ªå®šä¹‰å¤´è§†å›¾ï¼Œå¯ä¸ºä»»æ„ç±»å‹)</span><br><span class="line">â”£ _UIButtonBarStackView</span><br><span class="line">â”ƒâ”£ _UITAMICAdaptorView</span><br><span class="line">â”ƒâ”— ...</span><br><span class="line">â”— ...</span><br></pre></td></tr></table></figure><h2 id="å®šåˆ¶å¯¼èˆªæ "><a href="#å®šåˆ¶å¯¼èˆªæ " class="headerlink" title="å®šåˆ¶å¯¼èˆªæ "></a>å®šåˆ¶å¯¼èˆªæ </h2><h3 id="UINavigationBarBackground-gt-UIBarBackground"><a href="#UINavigationBarBackground-gt-UIBarBackground" class="headerlink" title="_UINavigationBarBackground -&gt; _UIBarBackground"></a>_UINavigationBarBackground -&gt; _UIBarBackground</h3><p>é€šè¿‡å¯¹æ¯”ï¼ŒiOS11åœ¨å¯¼èˆªæ è§†å›¾ä¸Šå°†å±‚çº§æ›´åŠ ç»†åˆ†ã€‚iOS11ä¹‹åå¤šäº†ä¸€å±‚_UIBarBackgroundè§†å›¾ï¼ŒèƒŒæ™¯å›¾åŠé˜´å½±è§†å›¾ä½äºä¸€ä¸ªå±‚çº§ã€‚iOS11ä¹‹å‰è®¾ç½®èƒŒæ™¯å›¾ï¼Œä½¿ç”¨<code>setBackgroundImage:forBarMetrics:</code>æ–¹æ³•ä¼šç›´æ¥ä½œç”¨åœ¨_UINavigationBarBackgroundä¸Šï¼ŒiOS11ä¹‹åä¼šåœ¨_UIBarBackgroundä¸‹æ·»åŠ ä¸€ä¸ªæ–°çš„èƒŒæ™¯è§†å›¾ã€‚ä½†æ˜¯ä½¿ç”¨<code>setBarTintColor:</code>æ–¹æ³•ï¼Œä¾ç„¶ä¼šç€è‰²äºçˆ¶å±‚çº§ã€‚</p><p>é€šè¿‡æŸ¥çœ‹ç³»ç»ŸAPIå¾—çŸ¥ï¼Œ<code>barTintColor</code>å±æ€§é»˜è®¤ä¸ºnilï¼Œå¦‚æœæƒ³è¦æ”¹å˜å¯¼èˆªæ èƒŒæ™¯å›¾å’Œé˜´å½±å›¾ï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡<code>setBackgroundImage:forBarMetrics:</code>å’Œ<code>setShadowImage:</code>ä¸¤ä¸ªæ–¹æ³•å³å¯ï¼Œpoä¸Šä»£ç ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®å¯¼èˆªæ èƒŒæ™¯è§†å›¾</span></span><br><span class="line">[__navigationBar setBackgroundImage:[<span class="built_in">UIImage</span> imageWithColor:App_Background_Color] forBarMetrics:<span class="built_in">UIBarMetricsDefault</span>];</span><br><span class="line"><span class="comment">//å»é™¤ä¸‹é˜´å½±çº¿</span></span><br><span class="line">[__navigationBar setShadowImage:[<span class="built_in">UIImage</span> imageWithColor:[<span class="built_in">UIColor</span> clearColor] size:<span class="built_in">CGSizeMake</span>(_ScreenWidth, <span class="number">0.1</span>)]];</span><br><span class="line"><span class="comment">//æ¸²æŸ“å›¾æ ‡</span></span><br><span class="line">[__navigationBar setTintColor:App_NaviBar_Tint_Color];</span><br><span class="line"><span class="comment">//è®¾ç½®æ ‡é¢˜æ ·å¼</span></span><br><span class="line">[__navigationBar setTitleTextAttributes:@&#123;</span><br><span class="line">    <span class="built_in">NSForegroundColorAttributeName</span> : App_NaviBar_Tint_Color,</span><br><span class="line">    <span class="built_in">NSFontAttributeName</span> : App_NaviBar_Text_Font</span><br><span class="line">&#125;];</span><br><span class="line"><span class="comment">//è®¾ç½®ä¸é€æ˜</span></span><br><span class="line">[__navigationBar setTranslucent:<span class="literal">NO</span>];</span><br></pre></td></tr></table></figure><p>ps:è®¾ç½®æƒ³è¦é˜´å½±çº¿é€æ˜ï¼Œåœ¨ä½¿ç”¨<code>setShadowImage:</code>æ–¹æ³•æ—¶ï¼Œå¯ä»¥è®¾ç½®é«˜åº¦ä¸º0.1ï¼Œè‹¥ä¸º0åˆ™æœ‰å¯èƒ½ä¸ç”Ÿæ•ˆ</p><h3 id="UINavigationItemView-gt-UINavigationBarContentView"><a href="#UINavigationItemView-gt-UINavigationBarContentView" class="headerlink" title="UINavigationItemView -&gt; _UINavigationBarContentView"></a>UINavigationItemView -&gt; _UINavigationBarContentView</h3><p>å†…å®¹è§†å›¾çš„å˜åŒ–æ˜¯å¯¼è‡´ä¹‹å‰è®¾ç½®æ ·å¼å¤±æ•ˆçš„æœ€å¤§åŸå› ï¼ŒiOS11æ‰€æœ‰çš„UIBarButtonIteméƒ½æ˜¯åŠ è½½åˆ°æ–°çš„_UIButtonBarStackViewä¸Šçš„ï¼Œè€Œ_UIButtonBarStackViewé»˜è®¤åœ¨5.5è‹±å¯¸æœºå‹æœ‰20pxå…¶ä½™æœºå‹ä¸º16pxçš„è¾¹è·ï¼ŒUIBarButtonSystemItemFixedSpaceä¹Ÿæ— æ³•ä½¿ç”¨äº†ã€‚éå¸¸å¹¸è¿ï¼Œé€šè¿‡ä¸æ–­çš„å°è¯•ï¼Œæ‰¾åˆ°äº†åŒæ—¶å®Œç¾å…¼å®¹å¤šç³»ç»Ÿç‰ˆæœ¬çš„å®šåˆ¶åŒ–æ–¹æ¡ˆã€‚UIBarButtonItemçš„<code>initWithCustomView:</code>æ–¹æ³•ï¼Œä¸ºæˆ‘ä»¬åˆ›é€ äº†æ— é™çš„å¯èƒ½æ€§ã€‚</p><p>ä½ æ˜¯ä¸æ˜¯çœ‹åˆ°è¿™é‡Œæƒ³åˆ°äº›ä»€ä¹ˆï¼Ÿ</p><p>æˆ‘ä»¬é‡æ–°é€ ä¸€ä¸ªXXNavigationItemContainerViewå®¹å™¨ï¼Œé€šè¿‡<code>initWithCustomView:</code>æ–¹æ³•åŠ è½½åˆ°å¯¼èˆªæ ä¸Šï¼Œé‚£ä¹ˆåœ¨XXNavigationItemContainerViewè§†å›¾ä¸Šï¼Œæˆ‘ä»¬å°±èƒ½åšå¾ˆå¤šå®šåˆ¶åŒ–æ“ä½œäº†ã€‚</p><p>å¯èƒ½çœ‹åˆ°è¿™é‡Œä½ ä½ ä¼šè§‰å¾—éå¸¸æŠ½è±¡ï¼Œæˆ‘ä»¬å…ˆçœ‹XXNavigationItemContainerView.hæä¾›çš„æ¥å£ä»¥åŠè°ƒç”¨</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">XXNavigationItemContainerView.h</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">NS_ENUM</span>(<span class="built_in">NSUInteger</span>, XXNavigationItemContainerLocation) &#123;</span><br><span class="line">    ZMCNavigationItemContainerLocationLeft = <span class="number">0</span>, <span class="comment">//å¯¹åº”leftBarButtonItem</span></span><br><span class="line">    ZMCNavigationItemContainerLocationRight,    <span class="comment">//å¯¹åº”rightBarButtonItem</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">XXNavigationItemContainerView</span> : <span class="title">UIView</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) XXNavigationItemContainerLocation location;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> å®¹å™¨è§†å›¾æ‰€åŒ…å«viewï¼Œviewå¿…é¡»æŒ‡å®šframe.size.width</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSArray</span> &lt;<span class="built_in">UIView</span> *&gt;*items;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> åˆå§‹åŒ–å¯¼èˆªæ Customå®¹å™¨è§†å›¾</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> @param loc å®¹å™¨è§†å›¾æ‰€åœ¨ä½ç½®</span></span><br><span class="line"><span class="comment"> @return ins</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">instancetype</span>)initWithContainerLocation:(XXNavigationItemContainerLocation)loc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br><span class="line"></span><br><span class="line">===</span><br><span class="line"></span><br><span class="line">ViewController.m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">_naviBarItemsLeftContainer = [[ZMCNavigationItemContainerView alloc] initWithContainerLocation:ZMCNavigationItemContainerLocationLeft];    </span><br><span class="line">_naviBarItemsLeftContainer.items = @[<span class="keyword">self</span>.backItem];</span><br><span class="line"><span class="keyword">self</span>.navigationItem.leftBarButtonItem = [[<span class="built_in">UIBarButtonItem</span> alloc] initWithCustomView:_naviBarItemsLeftContainer];</span><br></pre></td></tr></table></figure><p>é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œæˆ‘ä»¬åªéœ€è¦å‘Containeræ·»åŠ å…ƒç´ ï¼ŒContainerä¼šæ ¹æ®æ·»åŠ é¡ºåºè‡ªåŠ¨æ¸²æŸ“å‡ºè§†å›¾ï¼Œå¹¶é€šè¿‡<code>initWithCustomView:</code>æ¥å£è®¾ç½®åˆ°å¯¼èˆªæ çš„å†…å®¹è§†å›¾ä¸Šã€‚</p><p>é€šè¿‡<code>setItems:</code>æ–¹æ³•å®ç°å®¹å™¨å¯¹å…ƒç´ çš„æ¸²æŸ“è¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼Œä¹‹å‰æœ‰è®²è¿‡_UIButtonBarStackViewåœ¨5.5è‹±å¯¸æœºå‹æœ‰20pxå…¶ä½™æœºå‹ä¸º16pxçš„è¾¹è·ï¼Œè¿™é‡Œæ¥è®²è®²å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><p>æ ¹æ®UIè§†è§‰ä¸Šçš„å…·ä½“å‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å°†å…ƒç´ æ¸²æŸ“è¿›å®¹å™¨æ—¶è°ƒæ•´å®ƒçš„æ•´ä½“åç§»ï¼Œç±»ä¼¼è¿™ä¸ªæ•ˆæœ:</p><p><img src="/2018/07/15/UINavigationBarå®šåˆ¶çš„æ­£ç¡®å§¿åŠ¿/navibar_cus_img_1.png" alt=""></p><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®æˆ–è€…å‡½æ•°çš„æ–¹å¼ï¼Œè·å–ä¸åŒæœºå‹ä¸Šçš„åç§»ï¼Œå¹¶ä¸”ä¿®æ­£å®ƒï¼Œè¿™æ˜¯å¾ˆå®¹æ˜“åšåˆ°çš„ã€‚ä½†æ˜¯è¿™ä¹ˆåšä»¥åï¼Œä½ ä¼šå‘ç°è¶…å‡ºçˆ¶è§†å›¾éƒ¨åˆ†çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ— æ³•å“åº”äº†ã€‚è§£å†³è¿™ä¸ªé—®é¢˜å°±æ¶‰åŠäº†äº‹ä»¶å“åº”é“¾ï¼ˆhit-testï¼‰ç›¸å…³çš„çŸ¥è¯†äº†ï¼Œè¯·è‡ªè¡Œå­¦ä¹ ï¼Œè¿™é‡Œåªè®²å®ç°å’Œè§£å†³æ–¹æ¡ˆï¼Œpoä¸Šä»£ç ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">BOOL</span>)pointInside:(<span class="built_in">CGPoint</span>)point withEvent:(<span class="built_in">UIEvent</span> *)event&#123;</span><br><span class="line">    <span class="built_in">CGRect</span> expectFrame;</span><br><span class="line">    <span class="keyword">switch</span> (<span class="keyword">self</span>.location) &#123;</span><br><span class="line">        <span class="keyword">case</span> XXNavigationItemContainerLocationLeft:</span><br><span class="line">            expectFrame = <span class="built_in">CGRectMake</span>(-NaviBar_Item_Offset, <span class="number">0</span>, <span class="keyword">self</span>.bounds.size.width, <span class="keyword">self</span>.bounds.size.height);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        <span class="keyword">case</span> XXNavigationItemContainerLocationRight:</span><br><span class="line">            expectFrame = <span class="built_in">CGRectMake</span>(NaviBar_Item_Offset, <span class="number">0</span>, <span class="keyword">self</span>.bounds.size.width, <span class="keyword">self</span>.bounds.size.height);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">CGRectContainsPoint</span>(expectFrame, point);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä½¿ç”¨<code>NaviBar_Item_Offset</code>æ¥å®šä¹‰æ‰€éœ€ä¿®æ­£çš„åç§»é‡ï¼Œåœ¨è§¦æ‘¸äº‹ä»¶å‘ç”Ÿå“åº”é“¾å¯»æ‰¾æœ€ä½³åŒ¹é…è§†å›¾æ—¶ï¼Œä¿®æ­£è§†å›¾ä½ç½®ä¿¡æ¯å¹¶å°†å…¶ä¸è§¦æ‘¸ä½ç½®è¿›è¡ŒåŒ¹é…ï¼Œè¿”å›ç»“æœ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç³»ç»Ÿå¯¼èˆªæ ï¼ˆUINavigationBarï¼‰çš„å®šåˆ¶ä¸€ç›´ä»¥æ¥éƒ½æ˜¯ä¸€ä¸ªæ¯”è¾ƒæ£˜æ‰‹çš„é—®é¢˜ï¼Œç‰¹åˆ«åœ¨iOS11ä»¥åå¯¼èˆªæ è§†å›¾ç»“æ„å‘ç”Ÿäº†æ”¹å˜ï¼Œå¯¼è‡´ä¹‹å‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆéƒ½ä¸å†é€‚ç”¨ã€‚ç”±äºå¯¼èˆªæ å›¾å±‚ç‹¬ç«‹äºæ§åˆ¶å™¨è§†å›¾ï¼Œæ‰€ä»¥ä½ å¯ä»¥éšè—æ‰å¯¼èˆªæ ä½¿ç”¨è‡ªå·±ç»˜åˆ¶çš„å¯¼èˆªæ ä»…ä½¿ç”¨å¯¼èˆªæ§åˆ¶å™¨çš„è§†å›¾æ ˆï¼Œä½†æœ¬æ–‡ä¸æ¨èè¿™
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iPhoneXé€‚é…ç¬”è®°</title>
    <link href="http://yoursite.com/2017/10/07/iPhoneX%E9%80%82%E9%85%8D%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2017/10/07/iPhoneXé€‚é…ç¬”è®°/</id>
    <published>2017-10-07T09:42:46.000Z</published>
    <updated>2018-08-19T09:49:10.509Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ç®€å•è®°å½•iPhone Xé€‚é…è¿‡ç¨‹ä¸­å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶å…³æ³¨äº†iOS11çš„ä¸€äº›ç³»ç»Ÿå±‚é¢æ”¹åŠ¨ï¼Œå¯èƒ½æ¶‰åŠäº¤äº’ã€è§†è§‰ï¼Œç›®çš„æ˜¯ç¬¦åˆæ–°çš„äº¤äº’è§„èŒƒï¼Œç•Œé¢ç¾è§‚å‹å¥½ã€‚<br>æˆ‘å°†æŒ‰ç…§ä¸€ä¸ªé¡¹ç›®çš„é€‚é…é¡ºåºæ¥è®²è§£</p><h2 id="Safe-Area"><a href="#Safe-Area" class="headerlink" title="Safe Area"></a>Safe Area</h2><p>iOS11æå‡ºçš„æ¦‚å¿µï¼Œå¤„äºSafe AreaèŒƒå›´å†…çš„è§†å›¾ä¿è¯ä¸ä¼šè¢«é®æŒ¡ï¼ŒSafe Areaé»˜è®¤å°ºå¯¸å¦‚å›¾ï¼š</p><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_safeArea.png" alt="avatar"></p><p> Masonryæœ€æ–°ç‰ˆæœ¬æ›´æ–°äº†å¯¹åº”çš„APIï¼ŒiOS11ä¸‹ï¼Œå¯ä»¥ç›¸å¯¹äº<code>safeAreaLayoutGuide...</code>è¿›è¡Œçº¦æŸ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#if (__IPHONE_OS_VERSION_MAX_ALLOWED &gt;= 110000) || (__TV_OS_VERSION_MAX_ALLOWED &gt;= 110000)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_safeAreaLayoutGuide API_AVAILABLE(ios(<span class="number">11.0</span>),tvos(<span class="number">11.0</span>));</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_safeAreaLayoutGuideTop API_AVAILABLE(ios(<span class="number">11.0</span>),tvos(<span class="number">11.0</span>));</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_safeAreaLayoutGuideBottom API_AVAILABLE(ios(<span class="number">11.0</span>),tvos(<span class="number">11.0</span>));</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_safeAreaLayoutGuideLeft API_AVAILABLE(ios(<span class="number">11.0</span>),tvos(<span class="number">11.0</span>));</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>, <span class="keyword">readonly</span>) MASViewAttribute *mas_safeAreaLayoutGuideRight API_AVAILABLE(ios(<span class="number">11.0</span>),tvos(<span class="number">11.0</span>));</span><br><span class="line"></span><br><span class="line"><span class="meta">#endif</span></span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœçˆ¶è§†å›¾å¤„äºSafe Areaå†…ï¼Œä»¥ä¸Šéƒ¨çº¦æŸä¸ºä¾‹ï¼Œçˆ¶è§†å›¾çš„<code>mas_safeAreaLayoutGuideTop</code>ä¸<code>mas_top</code>å±æ€§ä¿æŒä¸€è‡´</p></blockquote><p>åœ¨iPhone 8ä¸Šå¯èƒ½Safe Areaè¿™ä¸ªæ¦‚å¿µå¯èƒ½æ¯”è¾ƒæŠ½è±¡ï¼Œä½†æ˜¯åœ¨iPhone Xä¸Šè¡¨ç°å¾—æ¯”è¾ƒæ˜æ˜¾</p><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_safeArea2.png" width="30%"></p><h2 id="å¯åŠ¨å›¾"><a href="#å¯åŠ¨å›¾" class="headerlink" title="å¯åŠ¨å›¾"></a>å¯åŠ¨å›¾</h2><p>ç¬¬ä¸€æ¬¡è¿è¡Œä½ çš„APPä¼šå‘ç°ä¸Šä¸‹éƒ¨ç¼ºäº†ä¸€éƒ¨åˆ†ï¼Œè·Ÿè‹¹æœæ¯æ¬¡å‘ä¸åŒçš„å°ºå¯¸æ‰‹æœºæ—¶ä¸€æ ·ï¼Œä½ éƒ½è¦ä¸ºå¥¹æ·»åŠ å¯åŠ¨å›¾ï¼Œå¦‚å›¾ï¼š</p><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_å¯åŠ¨å›¾1.png" width="30%"></p><p>è¿›å»å</p><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_å¯åŠ¨å›¾2.png" width="30%"></p><p>iPhone Xçš„Launchå›¾å°ºå¯¸æ˜¯<code>1125*2436</code></p><blockquote><p>é…ç½®ä»£ç </p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">      &quot;extent&quot; : &quot;full-screen&quot;,</span><br><span class="line">      &quot;idiom&quot; : &quot;iphone&quot;,</span><br><span class="line">      &quot;subtype&quot; : &quot;2436h&quot;,</span><br><span class="line">      &quot;filename&quot; : &quot;xxx-1125*2436@3x.png&quot;,</span><br><span class="line">      &quot;minimum-system-version&quot; : &quot;11.0&quot;,</span><br><span class="line">      &quot;orientation&quot; : &quot;portrait&quot;,</span><br><span class="line">      &quot;scale&quot; : &quot;3x&quot;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h2 id="TabBar"><a href="#TabBar" class="headerlink" title="TabBar"></a>TabBar</h2><p>åœ¨iPhone Xä¸‹ï¼Œpushæ–°çš„æ§åˆ¶å™¨è¿›å…¥ç•Œé¢ï¼Œtabæ ä¼šæœ‰ä¸€ä¸ªé«˜åº¦åç§»44ä¸ªå•ä½</p><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_tabé«˜åº¦å˜åŒ–.png" width="30%"></p><p>ç›®å‰è§£å†³æ–¹æ¡ˆåœ¨TabbarControlleræ·»åŠ å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)viewDidLayoutSubviews &#123;</span><br><span class="line"></span><br><span class="line">[<span class="keyword">super</span> viewDidLayoutSubviews];</span><br><span class="line">    <span class="built_in">CGFloat</span> tabbarHeight = __IS_IPHONE_X ? <span class="number">83</span> : <span class="number">49</span>; <span class="comment">// é€‚é…iPhone x åº•æ é«˜åº¦</span></span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    <span class="built_in">CGRect</span> frame = <span class="keyword">self</span>.tabBar.frame;</span><br><span class="line">    frame.size.height = tabbarHeight;</span><br><span class="line">    frame.origin.y = <span class="keyword">self</span>.view.frame.size.height - frame.size.height;</span><br><span class="line">    <span class="keyword">self</span>.tabBar.frame = frame;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="é¿å¼€å±é™©åŒº"><a href="#é¿å¼€å±é™©åŒº" class="headerlink" title="é¿å¼€å±é™©åŒº"></a>é¿å¼€å±é™©åŒº</h2><p>iPhone Xåœ¨é¡¶éƒ¨å¤šå‡ºäº†44ä¸ªåƒç´ çš„åœ†è§’æ˜¾ç¤ºçŠ¶æ€æ ï¼Œåº•éƒ¨å¤šå‡ºäº†34ä¸ªåƒç´ ç”¨äºhomeé”®æ“ä½œï¼Œæˆ‘ä»¬åº”è¯¥é¿å¼€ä»–ä»¬ï¼š</p><h3 id="åº•éƒ¨å·¥å…·æ "><a href="#åº•éƒ¨å·¥å…·æ " class="headerlink" title="åº•éƒ¨å·¥å…·æ "></a>åº•éƒ¨å·¥å…·æ </h3><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_å·¥å…·æ .png" width="30%"></p><blockquote><p>æ­¤å¤„åŸæ–¹æ¡ˆæ˜¯ä½¿ç”¨<code>safeAreaLayoutGuide</code>è¿›è¡Œå¸ƒå±€ï¼Œä½†å®é™…æ•ˆæœä¸Šæ¥çœ‹å¹¶ä¸ç†æƒ³ï¼Œæ‰€ä»¥æ­¤å¤„åˆ¤æ–­åœ¨iPhone Xä¸‹å›ºå®šé«˜åº¦ï¼Œè‡ªå¤–å‘å†…å¸ƒå±€ï¼Œä¸ºhomeç•™å‡ºæ“ä½œç©ºé—´</p></blockquote><h3 id="sheetå¼¹æ¡†"><a href="#sheetå¼¹æ¡†" class="headerlink" title="sheetå¼¹æ¡†"></a>sheetå¼¹æ¡†</h3><p>å–æ¶ˆcellï¼Œé®æŒ¡ä½homeé”®</p><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_åº•éƒ¨å¼¹å‡ºæ¡†é®æŒ¡home.png" width="30%"></p><blockquote><p>è¿™ç§æ ·å¼çš„å¼¹æ¡†ä¸å¯é¿å…é®æŒ¡homeé”®ï¼Œå¯ä»¥å°†æ§ä»¶æ•´ä½“æé«˜34ä¸ªåƒç´ ï¼Œç•™å‡ºhomeæ“ä½œç©ºé—´</p></blockquote><p><img src="/2017/10/07/iPhoneXé€‚é…ç¬”è®°/iphoneXé€‚é…_åº•éƒ¨å¼¹å‡ºæ¡†é®æŒ¡home2.png" width="30%"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;æœ¬æ–‡ç®€å•è®°å½•iPhone Xé€‚é…è¿‡ç¨‹ä¸­å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼ŒåŒæ—¶å…³æ³¨äº†iOS11çš„ä¸€äº›ç³»ç»Ÿå±‚é¢æ”¹åŠ¨ï¼Œå¯èƒ½æ¶‰åŠäº¤äº’ã€è§†è§‰ï¼Œç›®çš„æ˜¯ç¬¦åˆæ–°çš„äº¤äº’è§„èŒƒï¼Œç•Œé¢ç¾è§‚å‹å¥½ã€‚&lt;br&gt;æˆ‘å°†æŒ‰ç…§ä¸€ä¸ªé¡¹ç›®çš„é€‚é…é¡ºåºæ¥è®²è§£&lt;/p&gt;
&lt;h2 id=&quot;Safe-Area&quot;&gt;&lt;a href=&quot;#Safe-Ar
      
    
    </summary>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
</feed>
